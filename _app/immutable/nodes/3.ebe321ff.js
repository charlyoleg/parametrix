import{d as gl,e as Te,a as ds,s as ut,m as cs,b as ms,P as Sl,g as kt,h as xt,j as yt,k as _s,l as hs,n as bl,o as vs,E as ft,p as ps,q as gs,r as bs,t as ks,u as Ts}from"../chunks/menuList.42bef0c1.js";import{H as Ns}from"../chunks/control.f5b05b5f.js";import{s as ze,e as Pt,i as ae,d as v,A as Es,f as m,a as D,l as K,g as _,h as w,c as y,r as re,m as Y,j as i,v as a,E as Q,B as Cs,C as ws,D as Ds,n as _e,F as xe,p as Ae,G as Be,w as Ze,H as ke,u as Ve,y as Tt,o as kl,z as jl,I as fs,J as Ut,K as ll,L as ys,M as Ht,N as Nt,O as Os,P as Ls,x as el}from"../chunks/scheduler.f047f8ca.js";import{S as He,i as Ke,a as Ee,g as Ss,t as De,c as js,f as Fe,b as je,d as Ie,m as Pe,e as Ue}from"../chunks/index.11b8e362.js";import{w as Is}from"../chunks/index.825457b2.js";import{p as Ps}from"../chunks/stores.858fa0dd.js";import{b as zt}from"../chunks/paths.688c58e7.js";function Il(t,e){return new Ns(t,e)}new TextEncoder;function Us({params:t}){const e=/^.*\//g,l=t.design.replace(e,"");if(Object.keys(gl).includes(l)){const s=gl[l].pDef.partName;if(s!==l)throw Il(500,`pDef.partName ${s} does not fit with short ${l}`);return{pageDef:gl[l]}}throw Il(404,"Design undefined!")}const Ya=Object.freeze(Object.defineProperty({__proto__:null,load:Us},Symbol.toStringTag,{value:"Module"}));function Pl(t){let e,l,s,r,n,o,c="Cancel",d,f,p,g,T,N;const h=t[6].default,u=Es(h,t,t[5],null);return{c(){e=m("aside"),l=m("div"),s=m("article"),u&&u.c(),r=D(),n=m("footer"),o=m("button"),o.textContent=c,d=D(),f=m("button"),p=K(t[1]),this.h()},l(O){e=_(O,"ASIDE",{class:!0});var b=w(e);l=_(b,"DIV",{class:!0});var E=w(l);s=_(E,"ARTICLE",{class:!0});var L=w(s);u&&u.l(L),L.forEach(v),r=y(E),n=_(E,"FOOTER",{class:!0});var k=w(n);o=_(k,"BUTTON",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-hcvk9s"&&(o.textContent=c),d=y(k),f=_(k,"BUTTON",{class:!0});var A=w(f);p=Y(A,t[1]),A.forEach(v),k.forEach(v),E.forEach(v),b.forEach(v),this.h()},h(){i(s,"class","question svelte-1xaafea"),i(o,"class","cancel svelte-1xaafea"),i(f,"class","ok svelte-1xaafea"),i(n,"class","svelte-1xaafea"),i(l,"class","dialog svelte-1xaafea"),i(e,"class","backdrop svelte-1xaafea")},m(O,b){ae(O,e,b),a(e,l),a(l,s),u&&u.m(s,null),a(l,r),a(l,n),a(n,o),a(n,d),a(n,f),a(f,p),g=!0,T||(N=[Q(o,"click",t[2]),Q(f,"click",t[3])],T=!0)},p(O,b){u&&u.p&&(!g||b&32)&&Cs(u,h,O,O[5],g?Ds(h,O[5],b,null):ws(O[5]),null),(!g||b&2)&&_e(p,O[1])},i(O){g||(Ee(u,O),g=!0)},o(O){De(u,O),g=!1},d(O){O&&v(e),u&&u.d(O),T=!1,xe(N)}}}function As(t){let e,l,s=t[0]&&Pl(t);return{c(){s&&s.c(),e=Pt()},l(r){s&&s.l(r),e=Pt()},m(r,n){s&&s.m(r,n),ae(r,e,n),l=!0},p(r,[n]){r[0]?s?(s.p(r,n),n&1&&Ee(s,1)):(s=Pl(r),s.c(),Ee(s,1),s.m(e.parentNode,e)):s&&(Ss(),De(s,1,1,()=>{s=null}),js())},i(r){l||(Ee(s),l=!0)},o(r){De(s),l=!1},d(r){r&&v(e),s&&s.d(r)}}}function Ms(t,e,l){let{$$slots:s={},$$scope:r}=e,{okName:n="Ok"}=e,{okFunc:o}=e,{modalOpen:c}=e;function d(){l(0,c=!1)}function f(){o(),l(0,c=!1)}return t.$$set=p=>{"okName"in p&&l(1,n=p.okName),"okFunc"in p&&l(4,o=p.okFunc),"modalOpen"in p&&l(0,c=p.modalOpen),"$$scope"in p&&l(5,r=p.$$scope)},[c,n,d,f,o,r,s]}class Vt extends He{constructor(e){super(),Ke(this,e,Ms,As,ze,{okName:1,okFunc:4,modalOpen:0})}}function Ul(t,e,l){const s=t.slice();return s[17]=e[l],s[18]=e,s[19]=l,s}function Al(t,e,l){const s=t.slice();return s[17]=e[l],s}function Ml(t){let e,l=t[17]+"",s;return{c(){e=m("p"),s=K(l),this.h()},l(r){e=_(r,"P",{class:!0});var n=w(e);s=Y(n,l),n.forEach(v),this.h()},h(){i(e,"class","diagItem svelte-12dj9tj")},m(r,n){ae(r,e,n),a(e,s)},p(r,n){n&1&&l!==(l=r[17]+"")&&_e(s,l)},d(r){r&&v(e)}}}function Bl(t){let e,l=t[3][t[17]]&&Ml(t);return{c(){l&&l.c(),e=Pt()},l(s){l&&l.l(s),e=Pt()},m(s,r){l&&l.m(s,r),ae(s,e,r)},p(s,r){s[3][s[17]]?l?l.p(s,r):(l=Ml(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(s){s&&v(e),l&&l.d(s)}}}function Bs(t){let e,l="Do you really want to delete the following localStorage keys?",s,r,n=Te(t[0]),o=[];for(let c=0;c<n.length;c+=1)o[c]=Bl(Al(t,n,c));return{c(){e=m("p"),e.textContent=l,s=D();for(let c=0;c<o.length;c+=1)o[c].c();r=Pt(),this.h()},l(c){e=_(c,"P",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-12r0p0q"&&(e.textContent=l),s=y(c);for(let d=0;d<o.length;d+=1)o[d].l(c);r=Pt(),this.h()},h(){i(e,"class","diagTitle svelte-12dj9tj")},m(c,d){ae(c,e,d),ae(c,s,d);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,d);ae(c,r,d)},p(c,d){if(d&9){n=Te(c[0]);let f;for(f=0;f<n.length;f+=1){const p=Al(c,n,f);o[f]?o[f].p(p,d):(o[f]=Bl(p),o[f].c(),o[f].m(r.parentNode,r))}for(;f<o.length;f+=1)o[f].d(1);o.length=n.length}},d(c){c&&(v(e),v(s),v(r)),Ze(o,c)}}}function Fl(t){let e,l,s,r,n,o,c=t[17]+"",d,f,p,g=t[2][t[17]]+"",T,N,h,u;function O(){t[12].call(s,t[17])}function b(){return t[13](t[17])}return{c(){e=m("tr"),l=m("td"),s=m("input"),r=D(),n=m("td"),o=m("button"),d=K(c),f=D(),p=m("td"),T=K(g),N=D(),this.h()},l(E){e=_(E,"TR",{class:!0});var L=w(e);l=_(L,"TD",{});var k=w(l);s=_(k,"INPUT",{type:!0}),k.forEach(v),r=y(L),n=_(L,"TD",{class:!0});var A=w(n);o=_(A,"BUTTON",{class:!0});var C=w(o);d=Y(C,c),C.forEach(v),A.forEach(v),f=y(L),p=_(L,"TD",{});var S=w(p);T=Y(S,g),S.forEach(v),N=y(L),L.forEach(v),this.h()},h(){i(s,"type","checkbox"),i(o,"class","svelte-12dj9tj"),i(n,"class","svelte-12dj9tj"),i(e,"class","svelte-12dj9tj")},m(E,L){ae(E,e,L),a(e,l),a(l,s),s.checked=t[3][t[17]],a(e,r),a(e,n),a(n,o),a(o,d),a(e,f),a(e,p),a(p,T),a(e,N),h||(u=[Q(s,"change",O),Q(o,"click",b)],h=!0)},p(E,L){t=E,L&9&&(s.checked=t[3][t[17]]),L&1&&c!==(c=t[17]+"")&&_e(d,c),L&5&&g!==(g=t[2][t[17]]+"")&&_e(T,g)},d(E){E&&v(e),h=!1,xe(u)}}}function Fs(t){let e,l,s="Delete",r,n,o,c,d,f,p,g="<td>Delete</td> <td>Key name</td> <td>Last modification</td>",T,N,h,u,O,b,E="delete all",L,k,A,C,S,F,B;function U(V){t[10](V)}let R={okName:"Confirm",okFunc:t[6],$$slots:{default:[Bs]},$$scope:{ctx:t}};t[4]!==void 0&&(R.modalOpen=t[4]),n=new Vt({props:R}),Ae.push(()=>Fe(n,"modalOpen",U));let Z=Te(t[0]),G=[];for(let V=0;V<Z.length;V+=1)G[V]=Fl(Ul(t,Z,V));return{c(){e=m("div"),l=m("button"),l.textContent=s,r=D(),je(n.$$.fragment),c=D(),d=m("table"),f=m("thead"),p=m("tr"),p.innerHTML=g,T=D(),N=m("tr"),h=m("td"),u=m("input"),O=D(),b=m("td"),b.textContent=E,L=D(),k=m("td"),A=D(),C=m("tbody");for(let V=0;V<G.length;V+=1)G[V].c();this.h()},l(V){e=_(V,"DIV",{class:!0});var W=w(e);l=_(W,"BUTTON",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-1tbm4xl"&&(l.textContent=s),r=y(W),Ie(n.$$.fragment,W),c=y(W),d=_(W,"TABLE",{class:!0});var ne=w(d);f=_(ne,"THEAD",{class:!0});var te=w(f);p=_(te,"TR",{"data-svelte-h":!0}),re(p)!=="svelte-xt53kn"&&(p.innerHTML=g),T=y(te),N=_(te,"TR",{});var se=w(N);h=_(se,"TD",{});var ie=w(h);u=_(ie,"INPUT",{type:!0}),ie.forEach(v),O=y(se),b=_(se,"TD",{class:!0,"data-svelte-h":!0}),re(b)!=="svelte-1s4wssd"&&(b.textContent=E),L=y(se),k=_(se,"TD",{}),w(k).forEach(v),se.forEach(v),te.forEach(v),A=y(ne),C=_(ne,"TBODY",{class:!0});var x=w(C);for(let ge=0;ge<G.length;ge+=1)G[ge].l(x);x.forEach(v),ne.forEach(v),W.forEach(v),this.h()},h(){i(l,"class","svelte-12dj9tj"),i(u,"type","checkbox"),i(b,"class","instruction"),i(f,"class","svelte-12dj9tj"),i(C,"class","svelte-12dj9tj"),i(d,"class","svelte-12dj9tj"),i(e,"class","deleteKeys svelte-12dj9tj")},m(V,W){ae(V,e,W),a(e,l),a(e,r),Pe(n,e,null),a(e,c),a(e,d),a(d,f),a(f,p),a(f,T),a(f,N),a(N,h),a(h,u),u.checked=t[1],a(N,O),a(N,b),a(N,L),a(N,k),a(d,A),a(d,C);for(let ne=0;ne<G.length;ne+=1)G[ne]&&G[ne].m(C,null);S=!0,F||(B=[Q(l,"click",t[9]),Q(u,"change",t[11])],F=!0)},p(V,[W]){const ne={};if(W&4194313&&(ne.$$scope={dirty:W,ctx:V}),!o&&W&16&&(o=!0,ne.modalOpen=V[4],Be(()=>o=!1)),n.$set(ne),W&2&&(u.checked=V[1]),W&45){Z=Te(V[0]);let te;for(te=0;te<Z.length;te+=1){const se=Ul(V,Z,te);G[te]?G[te].p(se,W):(G[te]=Fl(se),G[te].c(),G[te].m(C,null))}for(;te<G.length;te+=1)G[te].d(1);G.length=Z.length}},i(V){S||(Ee(n.$$.fragment,V),S=!0)},o(V){De(n.$$.fragment,V),S=!1},d(V){V&&v(e),Ue(n),Ze(G,V),F=!1,xe(B)}}}function Rs(t){let e={};for(const l of t)e[l]=!1;return e}function Vs(t,e,l){let{pageName:s}=e,{storeName:r}=e,{localKeys:n}=e;function o(){let k=[];const A=new RegExp(`^${s}_`);return k=Object.keys(window.localStorage).filter(S=>A.test(S)).map(S=>S.replace(A,"")),k}n=o();function c(k){l(7,r=k)}let d={};function f(k){let A={};for(const C of k){let S="";const F=`${s}_${C}`,B=window.localStorage.getItem(F);B!==null&&(S=JSON.parse(B).lastModif),A[C]=S}return A}d=f(n);let p={};p=Rs(n);let g=!1;function T(k){for(const A of n)l(3,p[A]=k,p)}function N(){for(const k of n)if(p[k]){const A=`${s}_${k}`;window.localStorage.removeItem(A)}l(0,n=o())}let h=!1;const u=()=>{l(4,h=!0)};function O(k){h=k,l(4,h)}function b(){g=this.checked,l(1,g)}function E(k){p[k]=this.checked,l(3,p)}const L=k=>c(k);return t.$$set=k=>{"pageName"in k&&l(8,s=k.pageName),"storeName"in k&&l(7,r=k.storeName),"localKeys"in k&&l(0,n=k.localKeys)},t.$$.update=()=>{t.$$.dirty&2&&T(g)},[n,g,d,p,h,c,N,r,s,u,O,b,E,L]}class us extends He{constructor(e){super(),Ke(this,e,Vs,Fs,ze,{pageName:8,storeName:7,localKeys:0})}}function Rl(t){let e,l,s,r;return{c(){e=m("p"),l=K("Warning: name "),s=K(t[0]),r=K(" already used"),this.h()},l(n){e=_(n,"P",{class:!0});var o=w(e);l=Y(o,"Warning: name "),s=Y(o,t[0]),r=Y(o," already used"),o.forEach(v),this.h()},h(){i(e,"class","warnMsg svelte-1rkdwo")},m(n,o){ae(n,e,o),a(e,l),a(e,s),a(e,r)},p(n,o){o&1&&_e(s,n[0])},d(n){n&&v(e)}}}function zs(t){let e,l,s,r,n,o,c="Give a name to your parameter-set:",d,f,p,g,T,N;function h(E){t[5](E)}function u(E){t[6](E)}let O={pageName:t[1]};t[0]!==void 0&&(O.storeName=t[0]),t[2]!==void 0&&(O.localKeys=t[2]),e=new us({props:O}),Ae.push(()=>Fe(e,"storeName",h)),Ae.push(()=>Fe(e,"localKeys",u));let b=t[3]&&Rl(t);return{c(){je(e.$$.fragment),r=D(),n=m("div"),o=m("label"),o.textContent=c,d=D(),f=m("input"),p=D(),b&&b.c(),this.h()},l(E){Ie(e.$$.fragment,E),r=y(E),n=_(E,"DIV",{class:!0});var L=w(n);o=_(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),re(o)!=="svelte-1vdq35w"&&(o.textContent=c),d=y(L),f=_(L,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,size:!0,class:!0}),p=y(L),b&&b.l(L),L.forEach(v),this.h()},h(){i(o,"for","storName"),i(o,"class","svelte-1rkdwo"),i(f,"type","text"),i(f,"id","storName"),f.required=!0,i(f,"minlength","4"),i(f,"maxlength","30"),i(f,"size","32"),i(f,"class","svelte-1rkdwo"),i(n,"class","svelte-1rkdwo")},m(E,L){Pe(e,E,L),ae(E,r,L),ae(E,n,L),a(n,o),a(n,d),a(n,f),ke(f,t[0]),a(n,p),b&&b.m(n,null),g=!0,T||(N=[Q(f,"input",t[7]),Q(f,"input",t[4])],T=!0)},p(E,[L]){const k={};L&2&&(k.pageName=E[1]),!l&&L&1&&(l=!0,k.storeName=E[0],Be(()=>l=!1)),!s&&L&4&&(s=!0,k.localKeys=E[2],Be(()=>s=!1)),e.$set(k),L&1&&f.value!==E[0]&&ke(f,E[0]),E[3]?b?b.p(E,L):(b=Rl(E),b.c(),b.m(n,null)):b&&(b.d(1),b=null)},i(E){g||(Ee(e.$$.fragment,E),g=!0)},o(E){De(e.$$.fragment,E),g=!1},d(E){E&&(v(r),v(n)),Ue(e,E),b&&b.d(),T=!1,xe(N)}}}function Hs(t){const e=/[-:]/g,l=/\..*$/;return`${t}_${new Date().toISOString().replace(e,"").replace(l,"").replace("T","_")}`}function Ks(t,e,l){let{pageName:s}=e,{storeName:r}=e,n=[];r=Hs(s);let o=!1;function c(T){l(3,o=n.includes(T))}function d(T){const N=T.target.value;c(N)}function f(T){r=T,l(0,r)}function p(T){n=T,l(2,n)}function g(){r=this.value,l(0,r)}return t.$$set=T=>{"pageName"in T&&l(1,s=T.pageName),"storeName"in T&&l(0,r=T.storeName)},t.$$.update=()=>{t.$$.dirty&1&&c(r)},[r,s,n,o,d,f,p,g]}class Ys extends He{constructor(e){super(),Ke(this,e,Ks,zs,ze,{pageName:1,storeName:0})}}function Xs(t){let e,l,s,r,n,o,c="Select a parameter-set:",d,f,p;function g(h){t[3](h)}function T(h){t[4](h)}let N={pageName:t[1]};return t[0]!==void 0&&(N.storeName=t[0]),t[2]!==void 0&&(N.localKeys=t[2]),e=new us({props:N}),Ae.push(()=>Fe(e,"storeName",g)),Ae.push(()=>Fe(e,"localKeys",T)),{c(){je(e.$$.fragment),r=D(),n=m("div"),o=m("label"),o.textContent=c,d=D(),f=m("input"),this.h()},l(h){Ie(e.$$.fragment,h),r=y(h),n=_(h,"DIV",{class:!0});var u=w(n);o=_(u,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),re(o)!=="svelte-rajgc0"&&(o.textContent=c),d=y(u),f=_(u,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,size:!0,class:!0}),u.forEach(v),this.h()},h(){i(o,"for","storName"),i(o,"class","svelte-1ozd0ey"),i(f,"type","text"),i(f,"id","storName"),f.value=t[0],f.readOnly=!0,i(f,"minlength","4"),i(f,"maxlength","30"),i(f,"size","32"),i(f,"class","svelte-1ozd0ey"),i(n,"class","svelte-1ozd0ey")},m(h,u){Pe(e,h,u),ae(h,r,u),ae(h,n,u),a(n,o),a(n,d),a(n,f),p=!0},p(h,[u]){const O={};u&2&&(O.pageName=h[1]),!l&&u&1&&(l=!0,O.storeName=h[0],Be(()=>l=!1)),!s&&u&4&&(s=!0,O.localKeys=h[2],Be(()=>s=!1)),e.$set(O),(!p||u&1&&f.value!==h[0])&&(f.value=h[0])},i(h){p||(Ee(e.$$.fragment,h),p=!0)},o(h){De(e.$$.fragment,h),p=!1},d(h){h&&(v(r),v(n)),Ue(e,h)}}}function Ws(t,e,l){let{pageName:s}=e,{storeName:r}=e,n=[];function o(f){let p=r;return!f.includes(p)&&(f.length>0?p=f[0]:p=""),p}function c(f){r=f,l(0,r),l(2,n)}function d(f){n=f,l(2,n)}return t.$$set=f=>{"pageName"in f&&l(1,s=f.pageName),"storeName"in f&&l(0,r=f.storeName)},t.$$.update=()=>{t.$$.dirty&4&&l(0,r=o(n))},[r,s,n,c,d]}class qs extends He{constructor(e){super(),Ke(this,e,Ws,Xs,ze,{pageName:1,storeName:0})}}const Re=Is(ds());function Zs(t){let e;return{c(){e=m("canvas"),this.h()},l(l){e=_(l,"CANVAS",{class:!0,width:!0,height:!0}),w(e).forEach(v),this.h()},h(){i(e,"class","mini svelte-z8e4tz"),i(e,"width",Vl),i(e,"height",Vl)},m(l,s){ae(l,e,s),t[8](e)},p:Ve,i:Ve,o:Ve,d(l){l&&v(e),t[8](null)}}}const Vl=200;function Gs(t,e,l){let s,r;Tt(t,Re,u=>l(6,s=u)),Tt(t,ut,u=>l(7,r=u));let{pageName:n}=e,{geom:o}=e,{face:c}=e,{simTime:d=0}=e,f,p;function g(u,O){const b=ms(O);b.ruler=!1;const E=f.getContext("2d");E.clearRect(0,0,E.canvas.width,E.canvas.height);try{p=u.getAdjustFull(E.canvas.width,E.canvas.height),u.draw(E,p,b)}catch(L){console.log(L)}}let T=0;function N(u,O,b,E){const L=o(u,O).fig;if(Object.keys(L).includes(b)){const k=L[b];g(k,E)}else{const k=cs(L);g(k,E)}}kl(()=>{N(d,r[n],c,s),l(5,T=1)});function h(u){Ae[u?"unshift":"push"](()=>{f=u,l(0,f)})}return t.$$set=u=>{"pageName"in u&&l(1,n=u.pageName),"geom"in u&&l(2,o=u.geom),"face"in u&&l(3,c=u.face),"simTime"in u&&l(4,d=u.simTime)},t.$$.update=()=>{t.$$.dirty&250&&T===1&&N(d,r[n],c,s)},[f,n,o,c,d,T,s,r,h]}class Js extends He{constructor(e){super(),Ke(this,e,Gs,Zs,ze,{pageName:1,geom:2,face:3,simTime:4})}}function zl(t,e,l){const s=t.slice();return s[46]=e[l],s[47]=e,s[48]=l,s}function Hl(t,e,l){const s=t.slice();return s[49]=e[l],s[51]=l,s}function Qs(t,e,l){const s=t.slice();return s[49]=e[l],s[51]=l,s}function $s(t){let e;return{c(){e=K("Load the default parameters ?")},l(l){e=Y(l,"Load the default parameters ?")},m(l,s){ae(l,e,s)},d(l){l&&v(e)}}}function xs(t){let e,l,s;function r(o){t[26](o)}let n={pageName:t[0].partName};return t[10]!==void 0&&(n.storeName=t[10]),e=new qs({props:n}),Ae.push(()=>Fe(e,"storeName",r)),{c(){je(e.$$.fragment)},l(o){Ie(e.$$.fragment,o)},m(o,c){Pe(e,o,c),s=!0},p(o,c){const d={};c[0]&1&&(d.pageName=o[0].partName),!l&&c[0]&1024&&(l=!0,d.storeName=o[10],Be(()=>l=!1)),e.$set(d)},i(o){s||(Ee(e.$$.fragment,o),s=!0)},o(o){De(e.$$.fragment,o),s=!1},d(o){Ue(e,o)}}}function ea(t){let e,l,s,r=Te(t[46].dropdown),n=[];for(let c=0;c<r.length;c+=1)n[c]=Kl(Hl(t,r,c));function o(){t[32].call(e,t[46])}return{c(){e=m("select");for(let c=0;c<n.length;c+=1)n[c].c();this.h()},l(c){e=_(c,"SELECT",{});var d=w(e);for(let f=0;f<n.length;f+=1)n[f].l(d);d.forEach(v),this.h()},h(){t[14][t[0].partName][t[46].name]===void 0&&Ht(o)},m(c,d){ae(c,e,d);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);Nt(e,t[14][t[0].partName][t[46].name],!0),l||(s=Q(e,"change",o),l=!0)},p(c,d){if(t=c,d[0]&1){r=Te(t[46].dropdown);let f;for(f=0;f<r.length;f+=1){const p=Hl(t,r,f);n[f]?n[f].p(p,d):(n[f]=Kl(p),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=r.length}d[0]&16385&&Nt(e,t[14][t[0].partName][t[46].name])},d(c){c&&v(e),Ze(n,c),l=!1,s()}}}function ta(t){let e,l,s,r=Te(["Off","On"]),n=[];for(let c=0;c<2;c+=1)n[c]=sa(Qs(t,r,c));function o(){t[31].call(e,t[46])}return{c(){e=m("select");for(let c=0;c<2;c+=1)n[c].c();this.h()},l(c){e=_(c,"SELECT",{});var d=w(e);for(let f=0;f<2;f+=1)n[f].l(d);d.forEach(v),this.h()},h(){t[14][t[0].partName][t[46].name]===void 0&&Ht(o)},m(c,d){ae(c,e,d);for(let f=0;f<2;f+=1)n[f]&&n[f].m(e,null);Nt(e,t[14][t[0].partName][t[46].name],!0),l||(s=Q(e,"change",o),l=!0)},p(c,d){t=c,d[0]&16385&&Nt(e,t[14][t[0].partName][t[46].name])},d(c){c&&v(e),Ze(n,c),l=!1,s()}}}function la(t){let e,l,s,r,n,o,c,d,f,p,g;function T(){t[29].call(e,t[46])}function N(){t[30].call(o,t[46])}return{c(){e=m("input"),n=D(),o=m("input"),this.h()},l(h){e=_(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),n=y(h),o=_(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){i(e,"type","number"),i(e,"min",l=t[46].min),i(e,"max",s=t[46].max),i(e,"step",r=t[46].step),i(e,"class","input-number svelte-1r7ybv3"),i(o,"type","range"),i(o,"min",c=t[46].min),i(o,"max",d=t[46].max),i(o,"step",f=t[46].step),i(o,"class","svelte-1r7ybv3")},m(h,u){ae(h,e,u),ke(e,t[14][t[0].partName][t[46].name]),ae(h,n,u),ae(h,o,u),ke(o,t[14][t[0].partName][t[46].name]),p||(g=[Q(e,"input",T),Q(e,"change",t[15]),Q(o,"change",N),Q(o,"input",N),Q(o,"change",t[15])],p=!0)},p(h,u){t=h,u[0]&1&&l!==(l=t[46].min)&&i(e,"min",l),u[0]&1&&s!==(s=t[46].max)&&i(e,"max",s),u[0]&1&&r!==(r=t[46].step)&&i(e,"step",r),u[0]&16385&&Ut(e.value)!==t[14][t[0].partName][t[46].name]&&ke(e,t[14][t[0].partName][t[46].name]),u[0]&1&&c!==(c=t[46].min)&&i(o,"min",c),u[0]&1&&d!==(d=t[46].max)&&i(o,"max",d),u[0]&1&&f!==(f=t[46].step)&&i(o,"step",f),u[0]&16385&&ke(o,t[14][t[0].partName][t[46].name])},d(h){h&&(v(e),v(n),v(o)),p=!1,xe(g)}}}function Kl(t){let e,l=t[49]+"",s;return{c(){e=m("option"),s=K(l),this.h()},l(r){e=_(r,"OPTION",{});var n=w(e);s=Y(n,l),n.forEach(v),this.h()},h(){e.__value=t[51],ke(e,e.__value)},m(r,n){ae(r,e,n),a(e,s)},p(r,n){n[0]&1&&l!==(l=r[49]+"")&&_e(s,l)},d(r){r&&v(e)}}}function sa(t){let e,l;return{c(){e=m("option"),l=K(t[49]),this.h()},l(s){e=_(s,"OPTION",{});var r=w(e);l=Y(r,t[49]),r.forEach(v),this.h()},h(){e.__value=t[51],ke(e,e.__value)},m(s,r){ae(s,e,r),a(e,l)},p:Ve,d(s){s&&v(e)}}}function Yl(t){let e,l,s,r=t[46].name+"",n,o,c,d,f,p=t[46].unit+"",g,T,N,h=t[46].init+"",u,O,b,E=t[46].min+"",L,k,A,C=t[46].max+"",S,F,B,U=t[46].step+"",R,Z,G,V;function W(){return t[28](t[46])}function ne(ie,x){return ie[46].pType===Sl.eNumber?la:ie[46].pType===Sl.eCheckbox?ta:ea}let te=ne(t),se=te(t);return{c(){e=m("tr"),l=m("td"),s=m("button"),n=K(r),o=D(),c=m("td"),se.c(),d=D(),f=m("td"),g=K(p),T=D(),N=m("td"),u=K(h),O=D(),b=m("td"),L=K(E),k=D(),A=m("td"),S=K(C),F=D(),B=m("td"),R=K(U),Z=D(),this.h()},l(ie){e=_(ie,"TR",{class:!0});var x=w(e);l=_(x,"TD",{class:!0});var ge=w(l);s=_(ge,"BUTTON",{class:!0});var me=w(s);n=Y(me,r),me.forEach(v),ge.forEach(v),o=y(x),c=_(x,"TD",{class:!0});var be=w(c);se.l(be),be.forEach(v),d=y(x),f=_(x,"TD",{class:!0});var P=w(f);g=Y(P,p),P.forEach(v),T=y(x),N=_(x,"TD",{class:!0});var H=w(N);u=Y(H,h),H.forEach(v),O=y(x),b=_(x,"TD",{class:!0});var q=w(b);L=Y(q,E),q.forEach(v),k=y(x),A=_(x,"TD",{class:!0});var ee=w(A);S=Y(ee,C),ee.forEach(v),F=y(x),B=_(x,"TD",{class:!0});var M=w(B);R=Y(M,U),M.forEach(v),Z=y(x),x.forEach(v),this.h()},h(){i(s,"class","svelte-1r7ybv3"),i(l,"class","svelte-1r7ybv3"),i(c,"class","svelte-1r7ybv3"),i(f,"class","svelte-1r7ybv3"),i(N,"class","svelte-1r7ybv3"),i(b,"class","svelte-1r7ybv3"),i(A,"class","svelte-1r7ybv3"),i(B,"class","svelte-1r7ybv3"),i(e,"class","svelte-1r7ybv3")},m(ie,x){ae(ie,e,x),a(e,l),a(l,s),a(s,n),a(e,o),a(e,c),se.m(c,null),a(e,d),a(e,f),a(f,g),a(e,T),a(e,N),a(N,u),a(e,O),a(e,b),a(b,L),a(e,k),a(e,A),a(A,S),a(e,F),a(e,B),a(B,R),a(e,Z),G||(V=Q(s,"click",W),G=!0)},p(ie,x){t=ie,x[0]&1&&r!==(r=t[46].name+"")&&_e(n,r),te===(te=ne(t))&&se?se.p(t,x):(se.d(1),se=te(t),se&&(se.c(),se.m(c,null))),x[0]&1&&p!==(p=t[46].unit+"")&&_e(g,p),x[0]&1&&h!==(h=t[46].init+"")&&_e(u,h),x[0]&1&&E!==(E=t[46].min+"")&&_e(L,E),x[0]&1&&C!==(C=t[46].max+"")&&_e(S,C),x[0]&1&&U!==(U=t[46].step+"")&&_e(R,U)},d(ie){ie&&v(e),se.d(),G=!1,V()}}}function aa(t){let e,l="Copy this URL and send it to your friends!",s,r,n;return{c(){e=m("p"),e.textContent=l,s=D(),r=m("p"),n=K(t[12]),this.h()},l(o){e=_(o,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1kscrpk"&&(e.textContent=l),s=y(o),r=_(o,"P",{class:!0});var c=w(r);n=Y(c,t[12]),c.forEach(v),this.h()},h(){i(r,"class","cUrl svelte-1r7ybv3")},m(o,c){ae(o,e,c),ae(o,s,c),ae(o,r,c),a(r,n)},p(o,c){c[0]&4096&&_e(n,o[12])},d(o){o&&(v(e),v(s),v(r))}}}function na(t){let e,l,s;function r(o){t[36](o)}let n={pageName:t[0].partName};return t[11]!==void 0&&(n.storeName=t[11]),e=new Ys({props:n}),Ae.push(()=>Fe(e,"storeName",r)),{c(){je(e.$$.fragment)},l(o){Ie(e.$$.fragment,o)},m(o,c){Pe(e,o,c),s=!0},p(o,c){const d={};c[0]&1&&(d.pageName=o[0].partName),!l&&c[0]&2048&&(l=!0,d.storeName=o[11],Be(()=>l=!1)),e.$set(d)},i(o){s||(Ee(e.$$.fragment,o),s=!0)},o(o){De(e.$$.fragment,o),s=!1},d(o){Ue(e,o)}}}function oa(t){let e,l,s="Parameters",r,n,o,c="Load Params from File",d,f,p,g,T="Set Params Default",N,h,u="Load Params from localStorage",O,b,E,L,k,A,C,S,F,B,U,R,Z='<tr class="svelte-1r7ybv3"><td class="svelte-1r7ybv3">Parameter name</td> <td class="svelte-1r7ybv3">Value</td> <td class="svelte-1r7ybv3">Unit</td> <td class="svelte-1r7ybv3">Default</td> <td class="svelte-1r7ybv3">Min</td> <td class="svelte-1r7ybv3">Max</td> <td class="svelte-1r7ybv3">Step</td></tr>',G,V,W,ne,te,se="Comment:",ie,x,ge,me,be="Save Parameters to File",P,H,q="Save Parameters as URL",ee,M,I="Save Parameters to localStorage",le,oe,ue,j,z,he,Ne,pe,Ce,rt,Ge,Ye,Je,et,Qe;function it(J){t[25](J)}let At={okName:"Overwrite Parameters",okFunc:t[18],$$slots:{default:[$s]},$$scope:{ctx:t}};t[6]!==void 0&&(At.modalOpen=t[6]),b=new Vt({props:At}),Ae.push(()=>Fe(b,"modalOpen",it));function Mt(J){t[27](J)}let tt={okName:"Load Parameters",okFunc:t[19],$$slots:{default:[xs]},$$scope:{ctx:t}};t[7]!==void 0&&(tt.modalOpen=t[7]),k=new Vt({props:tt}),Ae.push(()=>Fe(k,"modalOpen",Mt));let lt=Te(t[0].params),ve=[];for(let J=0;J<lt.length;J+=1)ve[J]=Yl(zl(t,lt,J));function st(J){t[35](J)}let Et={okName:"Done",okFunc:ia,$$slots:{default:[aa]},$$scope:{ctx:t}};t[8]!==void 0&&(Et.modalOpen=t[8]),oe=new Vt({props:Et}),Ae.push(()=>Fe(oe,"modalOpen",st));function Bt(J){t[37](J)}let Xe={okName:"Save into localStorage",okFunc:t[20],$$slots:{default:[na]},$$scope:{ctx:t}};return t[9]!==void 0&&(Xe.modalOpen=t[9]),z=new Vt({props:Xe}),Ae.push(()=>Fe(z,"modalOpen",Bt)),Ye=new Js({props:{pageName:t[0].partName,geom:t[1],face:t[2],simTime:t[3]}}),{c(){e=m("section"),l=m("h2"),l.textContent=s,r=D(),n=m("main"),o=m("label"),o.textContent=c,d=D(),f=m("input"),p=D(),g=m("button"),g.textContent=T,N=D(),h=m("button"),h.textContent=u,O=D(),je(b.$$.fragment),L=D(),je(k.$$.fragment),C=D(),S=m("p"),F=K(t[5]),B=D(),U=m("table"),R=m("thead"),R.innerHTML=Z,G=D(),V=m("tbody");for(let J=0;J<ve.length;J+=1)ve[J].c();W=D(),ne=m("div"),te=m("label"),te.textContent=se,ie=D(),x=m("input"),ge=D(),me=m("button"),me.textContent=be,P=D(),H=m("button"),H.textContent=q,ee=D(),M=m("button"),M.textContent=I,le=D(),je(oe.$$.fragment),j=D(),je(z.$$.fragment),Ne=D(),pe=m("img"),rt=D(),Ge=m("div"),je(Ye.$$.fragment),this.h()},l(J){e=_(J,"SECTION",{class:!0});var fe=w(e);l=_(fe,"H2",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-1mc497a"&&(l.textContent=s),r=y(fe),n=_(fe,"MAIN",{class:!0});var ce=w(n);o=_(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),re(o)!=="svelte-zt7rok"&&(o.textContent=c),d=y(ce),f=_(ce,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),p=y(ce),g=_(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),re(g)!=="svelte-1typ5"&&(g.textContent=T),N=y(ce),h=_(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-187bpo6"&&(h.textContent=u),O=y(ce),Ie(b.$$.fragment,ce),L=y(ce),Ie(k.$$.fragment,ce),C=y(ce),S=_(ce,"P",{class:!0});var at=w(S);F=Y(at,t[5]),at.forEach(v),B=y(ce),U=_(ce,"TABLE",{class:!0});var ye=w(U);R=_(ye,"THEAD",{class:!0,"data-svelte-h":!0}),re(R)!=="svelte-19j94z2"&&(R.innerHTML=Z),G=y(ye),V=_(ye,"TBODY",{class:!0});var nt=w(V);for(let ot=0;ot<ve.length;ot+=1)ve[ot].l(nt);nt.forEach(v),ye.forEach(v),W=y(ce),ne=_(ce,"DIV",{class:!0});var Me=w(ne);te=_(Me,"LABEL",{for:!0,"data-svelte-h":!0}),re(te)!=="svelte-gqskth"&&(te.textContent=se),ie=y(Me),x=_(Me,"INPUT",{type:!0,id:!0,maxlength:!0,size:!0}),Me.forEach(v),ge=y(ce),me=_(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),re(me)!=="svelte-18c144"&&(me.textContent=be),P=y(ce),H=_(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),re(H)!=="svelte-11or0m2"&&(H.textContent=q),ee=y(ce),M=_(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),re(M)!=="svelte-5zdtrl"&&(M.textContent=I),le=y(ce),Ie(oe.$$.fragment,ce),j=y(ce),Ie(z.$$.fragment,ce),ce.forEach(v),Ne=y(fe),pe=_(fe,"IMG",{src:!0,alt:!0,class:!0}),rt=y(fe),Ge=_(fe,"DIV",{class:!0});var we=w(Ge);Ie(Ye.$$.fragment,we),we.forEach(v),fe.forEach(v),this.h()},h(){i(l,"class","svelte-1r7ybv3"),i(o,"for","loadFParams"),i(o,"class","fileUpload svelte-1r7ybv3"),i(f,"id","loadFParams"),i(f,"type","file"),i(f,"accept","text/plain, application/json"),i(f,"class","svelte-1r7ybv3"),i(g,"class","svelte-1r7ybv3"),i(h,"class","svelte-1r7ybv3"),i(S,"class","load-msg svelte-1r7ybv3"),i(R,"class","svelte-1r7ybv3"),i(V,"class","svelte-1r7ybv3"),i(U,"class","svelte-1r7ybv3"),i(te,"for","inComment"),i(x,"type","text"),i(x,"id","inComment"),i(x,"maxlength","150"),i(x,"size","70"),i(ne,"class","comment svelte-1r7ybv3"),i(me,"class","svelte-1r7ybv3"),i(H,"class","svelte-1r7ybv3"),i(M,"class","svelte-1r7ybv3"),i(n,"class","svelte-1r7ybv3"),jl(pe.src,Ce=t[13])||i(pe,"src",Ce),i(pe,"alt",t[13]),i(pe,"class","svelte-1r7ybv3"),i(Ge,"class","mini-canvas svelte-1r7ybv3"),i(e,"class","svelte-1r7ybv3")},m(J,fe){ae(J,e,fe),a(e,l),a(e,r),a(e,n),a(n,o),a(n,d),a(n,f),a(n,p),a(n,g),a(n,N),a(n,h),a(n,O),Pe(b,n,null),a(n,L),Pe(k,n,null),a(n,C),a(n,S),a(S,F),a(n,B),a(n,U),a(U,R),a(U,G),a(U,V);for(let ce=0;ce<ve.length;ce+=1)ve[ce]&&ve[ce].m(V,null);a(n,W),a(n,ne),a(ne,te),a(ne,ie),a(ne,x),ke(x,t[4]),a(n,ge),a(n,me),a(n,P),a(n,H),a(n,ee),a(n,M),a(n,le),Pe(oe,n,null),a(n,j),Pe(z,n,null),a(e,Ne),a(e,pe),a(e,rt),a(e,Ge),Pe(Ye,Ge,null),Je=!0,et||(Qe=[Q(f,"change",t[16]),Q(g,"click",t[23]),Q(h,"click",t[24]),Q(x,"input",t[33]),Q(me,"click",t[17]),Q(H,"click",t[21]),Q(M,"click",t[34])],et=!0)},p(J,fe){const ce={};fe[1]&4194304&&(ce.$$scope={dirty:fe,ctx:J}),!E&&fe[0]&64&&(E=!0,ce.modalOpen=J[6],Be(()=>E=!1)),b.$set(ce);const at={};if(fe[0]&1025|fe[1]&4194304&&(at.$$scope={dirty:fe,ctx:J}),!A&&fe[0]&128&&(A=!0,at.modalOpen=J[7],Be(()=>A=!1)),k.$set(at),(!Je||fe[0]&32)&&_e(F,J[5]),fe[0]&4243457){lt=Te(J[0].params);let we;for(we=0;we<lt.length;we+=1){const ot=zl(J,lt,we);ve[we]?ve[we].p(ot,fe):(ve[we]=Yl(ot),ve[we].c(),ve[we].m(V,null))}for(;we<ve.length;we+=1)ve[we].d(1);ve.length=lt.length}fe[0]&16&&x.value!==J[4]&&ke(x,J[4]);const ye={};fe[0]&4096|fe[1]&4194304&&(ye.$$scope={dirty:fe,ctx:J}),!ue&&fe[0]&256&&(ue=!0,ye.modalOpen=J[8],Be(()=>ue=!1)),oe.$set(ye);const nt={};fe[0]&2049|fe[1]&4194304&&(nt.$$scope={dirty:fe,ctx:J}),!he&&fe[0]&512&&(he=!0,nt.modalOpen=J[9],Be(()=>he=!1)),z.$set(nt),(!Je||fe[0]&8192&&!jl(pe.src,Ce=J[13]))&&i(pe,"src",Ce),(!Je||fe[0]&8192)&&i(pe,"alt",J[13]);const Me={};fe[0]&1&&(Me.pageName=J[0].partName),fe[0]&2&&(Me.geom=J[1]),fe[0]&4&&(Me.face=J[2]),fe[0]&8&&(Me.simTime=J[3]),Ye.$set(Me)},i(J){Je||(Ee(b.$$.fragment,J),Ee(k.$$.fragment,J),Ee(oe.$$.fragment,J),Ee(z.$$.fragment,J),Ee(Ye.$$.fragment,J),Je=!0)},o(J){De(b.$$.fragment,J),De(k.$$.fragment,J),De(oe.$$.fragment,J),De(z.$$.fragment,J),De(Ye.$$.fragment,J),Je=!1},d(J){J&&v(e),Ue(b),Ue(k),Ze(ve,J),Ue(oe),Ue(z),Ue(Ye),et=!1,xe(Qe)}}}const Xl="pVal",Wl="comment";function ra(t,e){const l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",t),l.click(),l.remove()}function ia(){}function ca(t,e,l){let s,r;Tt(t,ut,j=>l(14,s=j)),Tt(t,Ps,j=>l(38,r=j));const n=fs();let{pDef:o}=e,{geom:c}=e,{face:d}=e,{simTime:f=0}=e,p="";function g(){n("paramChg",{foo:"bla"})}function T(j){let z=0,he=0,Ne=0;for(const Ce of o.params)Object.hasOwn(j,Ce.name)?(z+=1,s[o.partName][Ce.name]===j[Ce.name]?Ne+=1:ys(ut,s[o.partName][Ce.name]=j[Ce.name],s)):he+=1;l(5,h=`Parameters loaded at ${new Date().toLocaleTimeString()} :`),l(5,h+=` def-nb: ${Object.keys(o.params).length}`),l(5,h+=`, load-nb: ${Object.keys(j).length}`),l(5,h+=`, cover-nb: ${z}, uncover-nb: ${he}`),l(5,h+=`, equal-nb: ${Ne}, diff-nb: ${z-Ne}`)}function N(){{const j=new URLSearchParams(r.url.search),z={};for(const[he,Ne]of j){const pe=Number(Ne);isNaN(pe)||(z[he]=pe)}Object.keys(z).length>0&&T(z)}}kl(()=>{N(),g()});let h="";function u(j){Object.hasOwn(j,Xl)&&T(j[Xl]),Object.hasOwn(j,Wl)?l(4,p=j[Wl]):l(4,p=""),g()}function O(j){const z=new FileReader;z.addEventListener("loadend",()=>{const he=JSON.parse(z.result);u(he)}),z.readAsText(j)}function b(j){if(j.target){const z=j.target.files;z&&O(z[0])}}function E(){const j=/[-:]/g,z=/\..*$/,he=new Date().toISOString().replace(j,"").replace(z,"").replace("T","_"),Ne=`px_${o.partName}_${he}.json`,pe={lastModif:he,pVal:s[o.partName],comment:p},Ce=JSON.stringify(pe,null,"  ");ra(Ne,Ce)}let L=!1,k=!1,A=!1,C=!1;function S(){const j={};for(const z of o.params)j[z.name]=z.init;u({pVal:j})}let F;function B(){if(F!==void 0&&F!==""){const j=`${o.partName}_${F}`;{const z=window.localStorage.getItem(j);if(z===null)console.log(`Warn157: localStorage key ${j} is null`);else{const he=JSON.parse(z);u(he)}}}else console.log("Warn239: No valid name for loading from localStorage!")}let U;function R(){if(U!==void 0&&U!==""){const j=`${o.partName}_${U}`,z=/\..*$/,Ne=JSON.stringify({lastModif:new Date().toISOString().replace(z,""),pVal:s[o.partName],comment:p});window.localStorage.setItem(j,Ne)}else console.log("Warn639: No valid name for writing to localStorage!")}let Z="";function G(){const j=new URL(r.url.href);for(const z of Object.keys(s[o.partName]))j.searchParams.append(encodeURIComponent(z),encodeURIComponent(s[o.partName][z]));return j.toString()}function V(){l(12,Z=G()),l(8,A=!0)}let W=`${zt}/default_param_blank.svg`;function ne(j){l(13,W=`${zt}/default_param_blank.svg`),Object.keys(o.paramSvg).includes(j)&&l(13,W=`${zt}/${o.paramSvg[j]}`)}function te(j,z){const he=Object.keys(s[z]).length;j<he&&ne(Object.keys(s[z])[j])}const se=()=>{l(6,L=!0)},ie=()=>{l(7,k=!0)};function x(j){L=j,l(6,L)}function ge(j){F=j,l(10,F)}function me(j){k=j,l(7,k)}const be=j=>ne(j.name);function P(j){s[o.partName][j.name]=Ut(this.value),ut.set(s)}function H(j){s[o.partName][j.name]=Ut(this.value),ut.set(s)}function q(j){s[o.partName][j.name]=ll(this),ut.set(s)}function ee(j){s[o.partName][j.name]=ll(this),ut.set(s)}function M(){p=this.value,l(4,p)}const I=()=>{l(9,C=!0)};function le(j){A=j,l(8,A)}function oe(j){U=j,l(11,U)}function ue(j){C=j,l(9,C)}return t.$$set=j=>{"pDef"in j&&l(0,o=j.pDef),"geom"in j&&l(1,c=j.geom),"face"in j&&l(2,d=j.face),"simTime"in j&&l(3,f=j.simTime)},t.$$.update=()=>{t.$$.dirty[0]&1&&te(0,o.partName)},[o,c,d,f,p,h,L,k,A,C,F,U,Z,W,s,g,b,E,S,B,R,V,ne,se,ie,x,ge,me,be,P,H,q,ee,M,I,le,oe,ue]}class fa extends He{constructor(e){super(),Ke(this,e,ca,oa,ze,{pDef:0,geom:1,face:2,simTime:3},null,[-1,-1])}}function ua(t){let e,l,s="0",r,n,o="<-",c,d,f="|<",p,g,T="||",N,h,u=">|",O,b,E="->",L,k,A,C,S,F;return{c(){e=m("nav"),l=m("button"),l.textContent=s,r=D(),n=m("button"),n.textContent=o,c=D(),d=m("button"),d.textContent=f,p=D(),g=m("button"),g.textContent=T,N=D(),h=m("button"),h.textContent=u,O=D(),b=m("button"),b.textContent=E,L=D(),k=m("input"),A=D(),C=m("input"),this.h()},l(B){e=_(B,"NAV",{class:!0});var U=w(e);l=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-sw7vi1"&&(l.textContent=s),r=y(U),n=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-gbiqvp"&&(n.textContent=o),c=y(U),d=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(d)!=="svelte-10nqggx"&&(d.textContent=f),p=y(U),g=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(g)!=="svelte-1xmh6xn"&&(g.textContent=T),N=y(U),h=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-1wuqlom"&&(h.textContent=u),O=y(U),b=_(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(b)!=="svelte-1vey426"&&(b.textContent=E),L=y(U),k=_(U,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),A=y(U),C=_(U,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),U.forEach(v),this.h()},h(){i(l,"class","svelte-ds3alj"),i(n,"class","svelte-ds3alj"),i(d,"class","svelte-ds3alj"),i(g,"class","svelte-ds3alj"),i(h,"class","svelte-ds3alj"),i(b,"class","svelte-ds3alj"),i(k,"type","range"),i(k,"min","0"),i(k,"max",t[1]),i(k,"step",t[2]),i(k,"class","svelte-ds3alj"),i(C,"type","number"),i(C,"min","0"),i(C,"max",t[1]),i(C,"step",t[2]),i(C,"class","svelte-ds3alj"),i(e,"class","svelte-ds3alj")},m(B,U){ae(B,e,U),a(e,l),a(e,r),a(e,n),a(e,c),a(e,d),a(e,p),a(e,g),a(e,N),a(e,h),a(e,O),a(e,b),a(e,L),a(e,k),ke(k,t[0]),a(e,A),a(e,C),ke(C,t[0]),S||(F=[Q(l,"click",t[3]),Q(n,"click",t[6]),Q(d,"click",t[4]),Q(g,"click",t[8]),Q(h,"click",t[5]),Q(b,"click",t[7]),Q(k,"change",t[10]),Q(k,"input",t[10]),Q(C,"input",t[11])],S=!0)},p(B,[U]){U&2&&i(k,"max",B[1]),U&4&&i(k,"step",B[2]),U&1&&ke(k,B[0]),U&2&&i(C,"max",B[1]),U&4&&i(C,"step",B[2]),U&1&&Ut(C.value)!==B[0]&&ke(C,B[0])},i:Ve,o:Ve,d(B){B&&v(e),S=!1,xe(F)}}}const ql=4;function da(t,e,l){let{tMax:s=10}=e,{tStep:r=.1}=e,{tUpdate:n=500}=e,{simTime:o=0}=e,c=null,d=0,f;function p(){c!==null&&(clearInterval(c),c=null)}function g(){f<0&&o<=0?l(0,o=s):f>0&&o>=s?l(0,o=0):l(0,o+=f)}function T(){const A=n/2**(Math.abs(d)-1);f=d<0?-r:r,c=setInterval(g,A)}function N(){p(),l(0,o=0),d=0}function h(){p(),d=0,f=-r,g()}function u(){p(),d=0,f=r,g()}function O(){p(),d=Math.max(d-1,-ql),T()}function b(){p(),d=Math.min(d+1,ql),T()}function E(){p(),d=0}Os(()=>{});function L(){o=Ut(this.value),l(0,o)}function k(){o=Ut(this.value),l(0,o)}return t.$$set=A=>{"tMax"in A&&l(1,s=A.tMax),"tStep"in A&&l(2,r=A.tStep),"tUpdate"in A&&l(9,n=A.tUpdate),"simTime"in A&&l(0,o=A.simTime)},[o,s,r,N,h,u,O,b,E,n,L,k]}class ma extends He{constructor(e){super(),Ke(this,e,da,ua,ze,{tMax:1,tStep:2,tUpdate:9,simTime:0})}}function _a(t){let e,l,s='<div class="zero svelte-c549k7"></div>',r,n,o='<div class="zoomin svelte-c549k7"></div>',c,d,f='<div class="zoomout svelte-c549k7"></div>',p,g,T='<div class="arrowleft svelte-c549k7"></div>',N,h,u='<div class="arrowright svelte-c549k7"></div>',O,b,E='<div class="arrowup svelte-c549k7"></div>',L,k,A='<div class="arrowdown svelte-c549k7"></div>',C,S;return{c(){e=m("nav"),l=m("button"),l.innerHTML=s,r=D(),n=m("button"),n.innerHTML=o,c=D(),d=m("button"),d.innerHTML=f,p=D(),g=m("button"),g.innerHTML=T,N=D(),h=m("button"),h.innerHTML=u,O=D(),b=m("button"),b.innerHTML=E,L=D(),k=m("button"),k.innerHTML=A,this.h()},l(F){e=_(F,"NAV",{class:!0});var B=w(e);l=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-nkdg6y"&&(l.innerHTML=s),r=y(B),n=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-nbpwn1"&&(n.innerHTML=o),c=y(B),d=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(d)!=="svelte-toyuqt"&&(d.innerHTML=f),p=y(B),g=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(g)!=="svelte-vbdqb3"&&(g.innerHTML=T),N=y(B),h=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-a55vyt"&&(h.innerHTML=u),O=y(B),b=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(b)!=="svelte-ky9277"&&(b.innerHTML=E),L=y(B),k=_(B,"BUTTON",{class:!0,"data-svelte-h":!0}),re(k)!=="svelte-1obyap9"&&(k.innerHTML=A),B.forEach(v),this.h()},h(){i(l,"class","svelte-c549k7"),i(n,"class","svelte-c549k7"),i(d,"class","svelte-c549k7"),i(g,"class","svelte-c549k7"),i(h,"class","svelte-c549k7"),i(b,"class","svelte-c549k7"),i(k,"class","svelte-c549k7"),i(e,"class","svelte-c549k7")},m(F,B){ae(F,e,B),a(e,l),a(e,r),a(e,n),a(e,c),a(e,d),a(e,p),a(e,g),a(e,N),a(e,h),a(e,O),a(e,b),a(e,L),a(e,k),C||(S=[Q(l,"click",t[1]),Q(n,"click",t[2]),Q(d,"click",t[3]),Q(g,"click",t[4]),Q(h,"click",t[5]),Q(b,"click",t[6]),Q(k,"click",t[7])],C=!0)},p:Ve,i:Ve,o:Ve,d(F){F&&v(e),C=!1,xe(S)}}}function ha(t){const e=fs();function l(p){e("myevent",{action:p})}return[l,()=>l("zoomInit"),()=>l("zoomIn"),()=>l("zoomOut"),()=>l("moveLeft"),()=>l("moveRight"),()=>l("moveUp"),()=>l("moveDown")]}class va extends He{constructor(e){super(),Ke(this,e,ha,_a,ze,{})}}function pa(t){let e,l,s,r,n,o,c,d,f,p,g,T,N,h,u,O,b,E,L,k,A,C,S,F,B,U,R,Z,G,V,W,ne,te,se,ie,x,ge,me,be,P,H,q;return{c(){e=m("div"),l=m("label"),s=m("input"),r=K("main part"),n=D(),o=m("label"),c=m("input"),d=K("main skeleton"),f=D(),p=m("label"),g=m("input"),T=K("second parts"),N=D(),h=m("label"),u=m("input"),O=K("second skeletons"),b=D(),E=m("label"),L=m("input"),k=K("dynamics"),A=D(),C=m("label"),S=m("input"),F=K("ruler"),B=D(),U=m("label"),R=m("input"),Z=K("frame of reference"),G=D(),V=m("label"),W=m("input"),ne=K("points"),te=D(),se=m("label"),ie=m("input"),x=K("lines"),ge=D(),me=m("label"),be=m("input"),P=K("vectors"),this.h()},l(ee){e=_(ee,"DIV",{class:!0});var M=w(e);l=_(M,"LABEL",{class:!0});var I=w(l);s=_(I,"INPUT",{type:!0,class:!0}),r=Y(I,"main part"),I.forEach(v),n=y(M),o=_(M,"LABEL",{class:!0});var le=w(o);c=_(le,"INPUT",{type:!0,class:!0}),d=Y(le,"main skeleton"),le.forEach(v),f=y(M),p=_(M,"LABEL",{class:!0});var oe=w(p);g=_(oe,"INPUT",{type:!0,class:!0}),T=Y(oe,"second parts"),oe.forEach(v),N=y(M),h=_(M,"LABEL",{class:!0});var ue=w(h);u=_(ue,"INPUT",{type:!0,class:!0}),O=Y(ue,"second skeletons"),ue.forEach(v),b=y(M),E=_(M,"LABEL",{class:!0});var j=w(E);L=_(j,"INPUT",{type:!0,class:!0}),k=Y(j,"dynamics"),j.forEach(v),A=y(M),C=_(M,"LABEL",{class:!0});var z=w(C);S=_(z,"INPUT",{type:!0,class:!0}),F=Y(z,"ruler"),z.forEach(v),B=y(M),U=_(M,"LABEL",{class:!0});var he=w(U);R=_(he,"INPUT",{type:!0,class:!0}),Z=Y(he,"frame of reference"),he.forEach(v),G=y(M),V=_(M,"LABEL",{class:!0});var Ne=w(V);W=_(Ne,"INPUT",{type:!0,class:!0}),ne=Y(Ne,"points"),Ne.forEach(v),te=y(M),se=_(M,"LABEL",{class:!0});var pe=w(se);ie=_(pe,"INPUT",{type:!0,class:!0}),x=Y(pe,"lines"),pe.forEach(v),ge=y(M),me=_(M,"LABEL",{class:!0});var Ce=w(me);be=_(Ce,"INPUT",{type:!0,class:!0}),P=Y(Ce,"vectors"),Ce.forEach(v),M.forEach(v),this.h()},h(){i(s,"type","checkbox"),i(s,"class","svelte-1rsbkj"),i(l,"class","svelte-1rsbkj"),i(c,"type","checkbox"),i(c,"class","svelte-1rsbkj"),i(o,"class","svelte-1rsbkj"),i(g,"type","checkbox"),i(g,"class","svelte-1rsbkj"),i(p,"class","svelte-1rsbkj"),i(u,"type","checkbox"),i(u,"class","svelte-1rsbkj"),i(h,"class","svelte-1rsbkj"),i(L,"type","checkbox"),i(L,"class","svelte-1rsbkj"),i(E,"class","svelte-1rsbkj"),i(S,"type","checkbox"),i(S,"class","svelte-1rsbkj"),i(C,"class","svelte-1rsbkj"),i(R,"type","checkbox"),i(R,"class","svelte-1rsbkj"),i(U,"class","svelte-1rsbkj"),i(W,"type","checkbox"),i(W,"class","svelte-1rsbkj"),i(V,"class","svelte-1rsbkj"),i(ie,"type","checkbox"),i(ie,"class","svelte-1rsbkj"),i(se,"class","svelte-1rsbkj"),i(be,"type","checkbox"),i(be,"class","svelte-1rsbkj"),i(me,"class","svelte-1rsbkj"),i(e,"class","svelte-1rsbkj")},m(ee,M){ae(ee,e,M),a(e,l),a(l,s),s.checked=t[0].main,a(l,r),a(e,n),a(e,o),a(o,c),c.checked=t[0].mainB,a(o,d),a(e,f),a(e,p),a(p,g),g.checked=t[0].second,a(p,T),a(e,N),a(e,h),a(h,u),u.checked=t[0].secondB,a(h,O),a(e,b),a(e,E),a(E,L),L.checked=t[0].dynamics,a(E,k),a(e,A),a(e,C),a(C,S),S.checked=t[0].ruler,a(C,F),a(e,B),a(e,U),a(U,R),R.checked=t[0].refframe,a(U,Z),a(e,G),a(e,V),a(V,W),W.checked=t[0].points,a(V,ne),a(e,te),a(e,se),a(se,ie),ie.checked=t[0].lines,a(se,x),a(e,ge),a(e,me),a(me,be),be.checked=t[0].vectors,a(me,P),H||(q=[Q(s,"change",t[1]),Q(c,"change",t[2]),Q(g,"change",t[3]),Q(u,"change",t[4]),Q(L,"change",t[5]),Q(S,"change",t[6]),Q(R,"change",t[7]),Q(W,"change",t[8]),Q(ie,"change",t[9]),Q(be,"change",t[10])],H=!0)},p(ee,[M]){M&1&&(s.checked=ee[0].main),M&1&&(c.checked=ee[0].mainB),M&1&&(g.checked=ee[0].second),M&1&&(u.checked=ee[0].secondB),M&1&&(L.checked=ee[0].dynamics),M&1&&(S.checked=ee[0].ruler),M&1&&(R.checked=ee[0].refframe),M&1&&(W.checked=ee[0].points),M&1&&(ie.checked=ee[0].lines),M&1&&(be.checked=ee[0].vectors)},i:Ve,o:Ve,d(ee){ee&&v(e),H=!1,xe(q)}}}function ga(t,e,l){let s;Tt(t,Re,h=>l(0,s=h));function r(){s.main=this.checked,Re.set(s)}function n(){s.mainB=this.checked,Re.set(s)}function o(){s.second=this.checked,Re.set(s)}function c(){s.secondB=this.checked,Re.set(s)}function d(){s.dynamics=this.checked,Re.set(s)}function f(){s.ruler=this.checked,Re.set(s)}function p(){s.refframe=this.checked,Re.set(s)}function g(){s.points=this.checked,Re.set(s)}function T(){s.lines=this.checked,Re.set(s)}function N(){s.vectors=this.checked,Re.set(s)}return[s,r,n,o,c,d,f,p,g,T,N]}class ba extends He{constructor(e){super(),Ke(this,e,ga,pa,ze,{})}}function Zl(t,e,l){const s=t.slice();return s[37]=e[l],s}function Gl(t){let e,l=t[37]+"",s,r;return{c(){e=m("option"),s=K(l),this.h()},l(n){e=_(n,"OPTION",{});var o=w(e);s=Y(o,l),o.forEach(v),this.h()},h(){e.__value=r=t[37],ke(e,e.__value)},m(n,o){ae(n,e,o),a(e,s)},p(n,o){o[0]&8&&l!==(l=n[37]+"")&&_e(s,l),o[0]&8&&r!==(r=n[37])&&(e.__value=r,ke(e,e.__value))},d(n){n&&v(e)}}}function ka(t){let e,l,s,r,n,o="All faces merged",c,d,f,p,g,T,N,h,u,O,b,E,L,k,A,C;Ht(t[19]);let S=Te(t[3]),F=[];for(let R=0;R<S.length;R+=1)F[R]=Gl(Zl(t,S,R));d=new ba({});function B(R){t[22](R)}let U={tMax:t[2].sim.tMax,tStep:t[2].sim.tStep,tUpdate:t[2].sim.tUpdate};return t[1]!==void 0&&(U.simTime=t[1]),N=new ma({props:U}),Ae.push(()=>Fe(N,"simTime",B)),L=new va({}),L.$on("myevent",t[8]),{c(){e=m("section"),l=m("h2"),s=K(`Drawing
		`),r=m("select");for(let R=0;R<F.length;R+=1)F[R].c();n=m("option"),n.textContent=o,c=D(),je(d.$$.fragment),f=D(),p=m("div"),g=m("canvas"),T=D(),je(N.$$.fragment),u=D(),O=m("div"),b=m("canvas"),E=D(),je(L.$$.fragment),this.h()},l(R){e=_(R,"SECTION",{class:!0});var Z=w(e);l=_(Z,"H2",{class:!0});var G=w(l);s=Y(G,`Drawing
		`),r=_(G,"SELECT",{class:!0});var V=w(r);for(let te=0;te<F.length;te+=1)F[te].l(V);n=_(V,"OPTION",{"data-svelte-h":!0}),re(n)!=="svelte-rnmenh"&&(n.textContent=o),V.forEach(v),G.forEach(v),c=y(Z),Ie(d.$$.fragment,Z),f=y(Z),p=_(Z,"DIV",{class:!0});var W=w(p);g=_(W,"CANVAS",{class:!0,width:!0,height:!0}),w(g).forEach(v),T=y(W),Ie(N.$$.fragment,W),W.forEach(v),u=y(Z),O=_(Z,"DIV",{class:!0});var ne=w(O);b=_(ne,"CANVAS",{class:!0,width:!0,height:!0}),w(b).forEach(v),E=y(ne),Ie(L.$$.fragment,ne),ne.forEach(v),Z.forEach(v),this.h()},h(){n.__value=kt,ke(n,n.__value),i(r,"class","svelte-s85el8"),t[0]===void 0&&Ht(()=>t[20].call(r)),i(l,"class","svelte-s85el8"),i(g,"class","full svelte-s85el8"),i(g,"width",Ot),i(g,"height",Ot),i(p,"class","rack svelte-s85el8"),i(b,"class","zoom svelte-s85el8"),i(b,"width",Ot),i(b,"height",Ot),i(O,"class","rack svelte-s85el8"),i(e,"class","svelte-s85el8")},m(R,Z){ae(R,e,Z),a(e,l),a(l,s),a(l,r);for(let G=0;G<F.length;G+=1)F[G]&&F[G].m(r,null);a(r,n),Nt(r,t[0],!0),a(e,c),Pe(d,e,null),a(e,f),a(e,p),a(p,g),t[21](g),a(p,T),Pe(N,p,null),a(e,u),a(e,O),a(O,b),t[23](b),a(O,E),Pe(L,O,null),k=!0,A||(C=[Q(window,"resize",t[7]),Q(window,"resize",t[19]),Q(r,"change",t[20]),Q(g,"mousedown",t[9]),Q(g,"mouseup",t[10]),Q(g,"mousemove",t[11]),Q(b,"mousedown",t[12]),Q(b,"mousemove",t[13]),Q(b,"wheel",Ls(t[14]))],A=!0)},p(R,Z){if(Z[0]&8){S=Te(R[3]);let V;for(V=0;V<S.length;V+=1){const W=Zl(R,S,V);F[V]?F[V].p(W,Z):(F[V]=Gl(W),F[V].c(),F[V].m(r,n))}for(;V<F.length;V+=1)F[V].d(1);F.length=S.length}Z[0]&9&&Nt(r,R[0]);const G={};Z[0]&4&&(G.tMax=R[2].sim.tMax),Z[0]&4&&(G.tStep=R[2].sim.tStep),Z[0]&4&&(G.tUpdate=R[2].sim.tUpdate),!h&&Z[0]&2&&(h=!0,G.simTime=R[1],Be(()=>h=!1)),N.$set(G)},i(R){k||(Ee(d.$$.fragment,R),Ee(N.$$.fragment,R),Ee(L.$$.fragment,R),k=!0)},o(R){De(d.$$.fragment,R),De(N.$$.fragment,R),De(L.$$.fragment,R),k=!1},d(R){R&&v(e),Ze(F,R),Ue(d),t[21](null),Ue(N),t[23](null),Ue(L),A=!1,xe(C)}}}const Ot=400,Ta=3e3,tl=10,Jl=3;function Na(t,e,l){let s,r;Tt(t,Re,P=>l(17,s=P)),Tt(t,ut,P=>l(18,r=P));let{pDef:n}=e,{geom:o}=e,{optFaces:c}=e,{face:d}=e,{simTime:f=0}=e,p,g,T,N,h,u;function O(P){const H=g.getContext("2d");H.clearRect(0,0,H.canvas.width,H.canvas.height);try{h=N.getAdjustFull(H.canvas.width,H.canvas.height),N.draw(H,h,P)}catch(q){console.log(q)}}function b(P){const H=T.getContext("2d");H.clearRect(0,0,H.canvas.width,H.canvas.height);try{(u===void 0||u.init===0)&&(u=N.getAdjustZoom(H.canvas.width,H.canvas.height)),N.draw(H,u,P)}catch(q){console.log(q)}}function E(){const P=g.getContext("2d"),H=Math.max(.4*p,Ot);P.canvas.width=H,P.canvas.height=H}function L(){E(),O(s),b(s)}let k=0;function A(P,H){let q=H;if(P.length===0)console.log("warn404: Drawing has an empty face list");else{const ee=P.slice();ee.push(kt),ee.includes(q)||(console.log(`warn403: Drawing has an invalid face ${q}`),q=P[0],l(0,d=q))}return q}function C(P,H,q,ee){const M=o(P,H).fig,I=Object.keys(M),le=A(I,q);I.includes(le)?N=M[le]:N=cs(M),O(ee),b(ee)}function S(P,H){C(P,r[n.partName],H,s)}kl(()=>{E(),S(f,d),l(16,k=1)});function F(P){switch(P.detail.action){case"zoomInit":u.init=0;break;case"zoomIn":u=xt(.7,u);break;case"zoomOut":u=xt(1.3,u);break;case"moveLeft":u.xMin+=-.2*u.xyDiff;break;case"moveRight":u.xMin+=.2*u.xyDiff;break;case"moveUp":u.yMin+=.2*u.xyDiff;break;case"moveDown":u.yMin+=-.2*u.xyDiff;break;default:console.log(`ERR423: ${P.detail.action} has no case!`)}b(s)}let B={timestamp:0,offsetX:0,offsetY:0};function U(P){P.button===0&&(B.timestamp=Date.now(),B.offsetX=P.offsetX,B.offsetY=P.offsetY)}function R(P){if(P.button===0)if(Date.now()-B.timestamp<Ta){const H=Math.abs(B.offsetX-P.offsetX),q=Math.abs(B.offsetY-P.offsetY);if(H<tl&&q<tl){const[ee,M]=yt(P.offsetX,P.offsetY,h);u=_s(ee,M,u),S(f,d)}if(H>tl&&q>tl){const ee=H/q,M=1/ee;if(ee<Jl&&M<Jl){const[I,le]=yt(P.offsetX,P.offsetY,h),[oe,ue]=yt(B.offsetX,B.offsetY,h);u=hs(I,le,oe,ue,Ot,Ot),S(f,d)}}}else console.log(`Warn205: ignore ${P.offsetX} ${P.offsetY} because too slow`)}function Z(P){const H=g.getContext("2d");if(P.buttons===1){const q=P.offsetX-B.offsetX,ee=P.offsetY-B.offsetY;O(s),H.beginPath(),H.rect(B.offsetX,B.offsetY,q,ee),H.strokeStyle=bl.mouse,H.stroke()}if(s.ruler){const[q,ee]=yt(P.offsetX,P.offsetY,h);H.clearRect(5,5,200,25),H.font="15px Arial",H.fillStyle=bl.ruler,H.fillText(`x: ${q.toFixed(4)} y: ${ee.toFixed(4)}`,5,20)}}let G,V,W;function ne(P){if(P.button===0){const[H,q]=yt(P.offsetX,P.offsetY,u);G=H,V=q,W=structuredClone(u)}}function te(P){if(P.buttons===1){const[H,q]=yt(P.offsetX,P.offsetY,W);u=vs(G,V,H,q,W),b(s)}else if(s.ruler){const H=T.getContext("2d"),[q,ee]=yt(P.offsetX,P.offsetY,u);H.clearRect(5,5,200,25),H.font="15px Arial",H.fillStyle=bl.ruler,H.fillText(`x: ${q.toFixed(4)} y: ${ee.toFixed(4)}`,5,20)}}function se(P){P.deltaY>0?u=xt(.7,u):u=xt(1.3,u),b(s)}function ie(){l(4,p=window.innerWidth)}function x(){d=ll(this),l(0,d),l(3,c)}function ge(P){Ae[P?"unshift":"push"](()=>{g=P,l(5,g)})}function me(P){f=P,l(1,f)}function be(P){Ae[P?"unshift":"push"](()=>{T=P,l(6,T)})}return t.$$set=P=>{"pDef"in P&&l(2,n=P.pDef),"geom"in P&&l(15,o=P.geom),"optFaces"in P&&l(3,c=P.optFaces),"face"in P&&l(0,d=P.face),"simTime"in P&&l(1,f=P.simTime)},t.$$.update=()=>{t.$$.dirty[0]&458759&&k===1&&C(f,r[n.partName],d,s)},[d,f,n,c,p,g,T,L,F,U,R,Z,ne,te,se,o,k,s,r,ie,x,ge,me,be]}class Ea extends He{constructor(e){super(),Ke(this,e,Na,ka,ze,{pDef:2,geom:15,optFaces:3,face:0,simTime:1},null,[-1,-1])}}function Ql(t,e,l){const s=t.slice();return s[2]=e[l],s}function $l(t,e,l){const s=t.slice();return s[5]=e[l],s[7]=l,s}function xl(t,e,l){const s=t.slice();return s[5]=e[l],s[7]=l,s}function es(t,e,l){const s=t.slice();return s[5]=e[l],s[7]=l,s}function ts(t){let e,l,s=t[7]+1+"",r,n,o,c=t[5]+"",d,f,p,g=t[0][t[2]].mandatories[t[5]]+"",T,N;return{c(){e=m("tr"),l=m("td"),r=K(s),n=D(),o=m("td"),d=K(c),f=D(),p=m("td"),T=K(g),N=D()},l(h){e=_(h,"TR",{});var u=w(e);l=_(u,"TD",{});var O=w(l);r=Y(O,s),O.forEach(v),n=y(u),o=_(u,"TD",{});var b=w(o);d=Y(b,c),b.forEach(v),f=y(u),p=_(u,"TD",{});var E=w(p);T=Y(E,g),E.forEach(v),N=y(u),u.forEach(v)},m(h,u){ae(h,e,u),a(e,l),a(l,r),a(e,n),a(e,o),a(o,d),a(e,f),a(e,p),a(p,T),a(e,N)},p(h,u){u&3&&c!==(c=h[5]+"")&&_e(d,c),u&3&&g!==(g=h[0][h[2]].mandatories[h[5]]+"")&&_e(T,g)},d(h){h&&v(e)}}}function ls(t){let e,l,s=t[7]+1+"",r,n,o,c=t[5]+"",d,f,p,g=t[0][t[2]].recommended[t[5]]+"",T,N;return{c(){e=m("tr"),l=m("td"),r=K(s),n=D(),o=m("td"),d=K(c),f=D(),p=m("td"),T=K(g),N=D()},l(h){e=_(h,"TR",{});var u=w(e);l=_(u,"TD",{});var O=w(l);r=Y(O,s),O.forEach(v),n=y(u),o=_(u,"TD",{});var b=w(o);d=Y(b,c),b.forEach(v),f=y(u),p=_(u,"TD",{});var E=w(p);T=Y(E,g),E.forEach(v),N=y(u),u.forEach(v)},m(h,u){ae(h,e,u),a(e,l),a(l,r),a(e,n),a(e,o),a(o,d),a(e,f),a(e,p),a(p,T),a(e,N)},p(h,u){u&3&&c!==(c=h[5]+"")&&_e(d,c),u&3&&g!==(g=h[0][h[2]].recommended[h[5]]+"")&&_e(T,g)},d(h){h&&v(e)}}}function ss(t){let e,l,s=t[7]+1+"",r,n,o,c=t[5]+"",d,f,p,g=t[0][t[2]].restricted[t[5]].min+"",T,N,h,u=t[0][t[2]].restricted[t[5]].max+"",O,b,E,L=t[0][t[2]].restricted[t[5]].step+"",k,A;return{c(){e=m("tr"),l=m("td"),r=K(s),n=D(),o=m("td"),d=K(c),f=D(),p=m("td"),T=K(g),N=D(),h=m("td"),O=K(u),b=D(),E=m("td"),k=K(L),A=D()},l(C){e=_(C,"TR",{});var S=w(e);l=_(S,"TD",{});var F=w(l);r=Y(F,s),F.forEach(v),n=y(S),o=_(S,"TD",{});var B=w(o);d=Y(B,c),B.forEach(v),f=y(S),p=_(S,"TD",{});var U=w(p);T=Y(U,g),U.forEach(v),N=y(S),h=_(S,"TD",{});var R=w(h);O=Y(R,u),R.forEach(v),b=y(S),E=_(S,"TD",{});var Z=w(E);k=Y(Z,L),Z.forEach(v),A=y(S),S.forEach(v)},m(C,S){ae(C,e,S),a(e,l),a(l,r),a(e,n),a(e,o),a(o,d),a(e,f),a(e,p),a(p,T),a(e,N),a(e,h),a(h,O),a(e,b),a(e,E),a(E,k),a(e,A)},p(C,S){S&3&&c!==(c=C[5]+"")&&_e(d,c),S&3&&g!==(g=C[0][C[2]].restricted[C[5]].min+"")&&_e(T,g),S&3&&u!==(u=C[0][C[2]].restricted[C[5]].max+"")&&_e(O,u),S&3&&L!==(L=C[0][C[2]].restricted[C[5]].step+"")&&_e(k,L)},d(C){C&&v(e)}}}function as(t){let e,l,s,r,n,o,c,d=t[2]+"",f,p,g,T,N,h=t[0][t[2]].partName+"",u,O,b,E,L="Export Constraints",k,A,C,S,F,B,U,R,Z,G,V,W,ne,te=Object.keys(t[0][t[2]].mandatories).length+"",se,ie,x,ge,me,be,P="<tr><td>Num</td> <td>Name</td> <td>Value</td></tr>",H,q,ee,M,I,le,oe,ue,j,z,he,Ne,pe,Ce,rt=Object.keys(t[0][t[2]].recommended).length+"",Ge,Ye,Je,et,Qe,it,At="<tr><td>Num</td> <td>Name</td> <td>Value</td></tr>",Mt,tt,lt,ve,st,Et,Bt,Xe,J,fe,ce,at,ye,nt,Me=Object.keys(t[0][t[2]].restricted).length+"",we,ot,sl,Lt,dt,Ct,Tl="<tr><td>Num</td> <td>Name</td> <td>Min</td> <td>Max</td> <td>Step</td></tr>",al,wt,nl,We,mt,Kt,ol,ct,Ft,rl,Yt,il,_t,cl,Rt=Object.keys(t[0][t[2]].restricted).length+"",Xt,fl,ul,Dt,Nl="aaa",dl,ml,El,St=Te(Object.keys(t[0][t[2]].mandatories)),Oe=[];for(let X=0;X<St.length;X+=1)Oe[X]=ts(es(t,St,X));let jt=Te(Object.keys(t[0][t[2]].recommended)),Le=[];for(let X=0;X<jt.length;X+=1)Le[X]=ls(xl(t,jt,X));let It=Te(Object.keys(t[0][t[2]].restricted)),Se=[];for(let X=0;X<It.length;X+=1)Se[X]=ss($l(t,It,X));return{c(){e=m("li"),l=m("input"),r=D(),n=m("label"),o=m("div"),c=D(),f=K(d),g=D(),T=m("a"),N=K("Go to "),u=K(h),b=D(),E=m("button"),E.textContent=L,k=D(),A=m("div"),C=m("article"),S=m("input"),B=D(),U=m("label"),R=m("div"),Z=K(`
						Mandatory`),V=D(),W=m("span"),ne=K("( "),se=K(te),ie=K(" parameters)"),x=D(),ge=m("div"),me=m("table"),be=m("thead"),be.innerHTML=P,H=D(),q=m("tbody");for(let X=0;X<Oe.length;X+=1)Oe[X].c();ee=D(),M=m("article"),I=m("input"),oe=D(),ue=m("label"),j=m("div"),z=K(`
						Recommended`),Ne=D(),pe=m("span"),Ce=K("( "),Ge=K(rt),Ye=K(" parameters)"),Je=D(),et=m("div"),Qe=m("table"),it=m("thead"),it.innerHTML=At,Mt=D(),tt=m("tbody");for(let X=0;X<Le.length;X+=1)Le[X].c();lt=D(),ve=m("article"),st=m("input"),Bt=D(),Xe=m("label"),J=m("div"),fe=K(`
						Restricted`),at=D(),ye=m("span"),nt=K("( "),we=K(Me),ot=K(" parameters)"),sl=D(),Lt=m("div"),dt=m("table"),Ct=m("thead"),Ct.innerHTML=Tl,al=D(),wt=m("tbody");for(let X=0;X<Se.length;X+=1)Se[X].c();nl=D(),We=m("article"),mt=m("input"),ol=D(),ct=m("label"),Ft=m("div"),rl=K(`
						Summary`),il=D(),_t=m("span"),cl=K("( "),Xt=K(Rt),fl=K(" parameters)"),ul=D(),Dt=m("div"),Dt.textContent=Nl,dl=D(),this.h()},l(X){e=_(X,"LI",{class:!0});var de=w(e);l=_(de,"INPUT",{type:!0,id:!0,class:!0}),r=y(de),n=_(de,"LABEL",{for:!0,class:!0});var $=w(n);o=_($,"DIV",{class:!0}),w(o).forEach(v),c=y($),f=Y($,d),$.forEach(v),g=y(de),T=_(de,"A",{href:!0,class:!0});var qe=w(T);N=Y(qe,"Go to "),u=Y(qe,h),qe.forEach(v),b=y(de),E=_(de,"BUTTON",{class:!0,"data-svelte-h":!0}),re(E)!=="svelte-5h3e48"&&(E.textContent=L),k=y(de),A=_(de,"DIV",{class:!0});var ht=w(A);C=_(ht,"ARTICLE",{class:!0});var vt=w(C);S=_(vt,"INPUT",{type:!0,id:!0,class:!0}),B=y(vt),U=_(vt,"LABEL",{for:!0,class:!0});var _l=w(U);R=_(_l,"DIV",{class:!0}),w(R).forEach(v),Z=Y(_l,`
						Mandatory`),_l.forEach(v),V=y(vt),W=_(vt,"SPAN",{class:!0});var Wt=w(W);ne=Y(Wt,"( "),se=Y(Wt,te),ie=Y(Wt," parameters)"),Wt.forEach(v),x=y(vt),ge=_(vt,"DIV",{class:!0});var Cl=w(ge);me=_(Cl,"TABLE",{class:!0});var qt=w(me);be=_(qt,"THEAD",{class:!0,"data-svelte-h":!0}),re(be)!=="svelte-6j0kay"&&(be.innerHTML=P),H=y(qt),q=_(qt,"TBODY",{class:!0});var wl=w(q);for(let $e=0;$e<Oe.length;$e+=1)Oe[$e].l(wl);wl.forEach(v),qt.forEach(v),Cl.forEach(v),vt.forEach(v),ee=y(ht),M=_(ht,"ARTICLE",{class:!0});var pt=w(M);I=_(pt,"INPUT",{type:!0,id:!0,class:!0}),oe=y(pt),ue=_(pt,"LABEL",{for:!0,class:!0});var hl=w(ue);j=_(hl,"DIV",{class:!0}),w(j).forEach(v),z=Y(hl,`
						Recommended`),hl.forEach(v),Ne=y(pt),pe=_(pt,"SPAN",{class:!0});var Zt=w(pe);Ce=Y(Zt,"( "),Ge=Y(Zt,rt),Ye=Y(Zt," parameters)"),Zt.forEach(v),Je=y(pt),et=_(pt,"DIV",{class:!0});var Dl=w(et);Qe=_(Dl,"TABLE",{class:!0});var Gt=w(Qe);it=_(Gt,"THEAD",{class:!0,"data-svelte-h":!0}),re(it)!=="svelte-6j0kay"&&(it.innerHTML=At),Mt=y(Gt),tt=_(Gt,"TBODY",{class:!0});var yl=w(tt);for(let $e=0;$e<Le.length;$e+=1)Le[$e].l(yl);yl.forEach(v),Gt.forEach(v),Dl.forEach(v),pt.forEach(v),lt=y(ht),ve=_(ht,"ARTICLE",{class:!0});var gt=w(ve);st=_(gt,"INPUT",{type:!0,id:!0,class:!0}),Bt=y(gt),Xe=_(gt,"LABEL",{for:!0,class:!0});var vl=w(Xe);J=_(vl,"DIV",{class:!0}),w(J).forEach(v),fe=Y(vl,`
						Restricted`),vl.forEach(v),at=y(gt),ye=_(gt,"SPAN",{class:!0});var Jt=w(ye);nt=Y(Jt,"( "),we=Y(Jt,Me),ot=Y(Jt," parameters)"),Jt.forEach(v),sl=y(gt),Lt=_(gt,"DIV",{class:!0});var Ol=w(Lt);dt=_(Ol,"TABLE",{class:!0});var Qt=w(dt);Ct=_(Qt,"THEAD",{class:!0,"data-svelte-h":!0}),re(Ct)!=="svelte-18btl7h"&&(Ct.innerHTML=Tl),al=y(Qt),wt=_(Qt,"TBODY",{class:!0});var Ll=w(wt);for(let $e=0;$e<Se.length;$e+=1)Se[$e].l(Ll);Ll.forEach(v),Qt.forEach(v),Ol.forEach(v),gt.forEach(v),nl=y(ht),We=_(ht,"ARTICLE",{class:!0});var bt=w(We);mt=_(bt,"INPUT",{type:!0,id:!0,class:!0}),ol=y(bt),ct=_(bt,"LABEL",{for:!0,class:!0});var pl=w(ct);Ft=_(pl,"DIV",{class:!0}),w(Ft).forEach(v),rl=Y(pl,`
						Summary`),pl.forEach(v),il=y(bt),_t=_(bt,"SPAN",{class:!0});var $t=w(_t);cl=Y($t,"( "),Xt=Y($t,Rt),fl=Y($t," parameters)"),$t.forEach(v),ul=y(bt),Dt=_(bt,"DIV",{class:!0,"data-svelte-h":!0}),re(Dt)!=="svelte-1oa5olk"&&(Dt.textContent=Nl),bt.forEach(v),ht.forEach(v),dl=y(de),de.forEach(v),this.h()},h(){i(l,"type","checkbox"),i(l,"id",s="cb_"+t[2]),i(l,"class","toggle svelte-1v5c2i7"),l.checked=!1,i(o,"class","arrow svelte-1v5c2i7"),i(n,"for",p="cb_"+t[2]),i(n,"class","label svelte-1v5c2i7"),i(T,"href",O=zt+"/gear/"+t[0][t[2]].partName),i(T,"class","svelte-1v5c2i7"),i(E,"class","svelte-1v5c2i7"),i(S,"type","checkbox"),i(S,"id",F="cb1_"+t[2]),i(S,"class","toggle svelte-1v5c2i7"),S.checked=!1,i(R,"class","arrow svelte-1v5c2i7"),i(U,"for",G="cb1_"+t[2]),i(U,"class","label svelte-1v5c2i7"),i(W,"class","svelte-1v5c2i7"),i(be,"class","svelte-1v5c2i7"),i(q,"class","svelte-1v5c2i7"),i(me,"class","svelte-1v5c2i7"),i(ge,"class","nested svelte-1v5c2i7"),i(C,"class","svelte-1v5c2i7"),i(I,"type","checkbox"),i(I,"id",le="cb2_"+t[2]),i(I,"class","toggle svelte-1v5c2i7"),I.checked=!1,i(j,"class","arrow svelte-1v5c2i7"),i(ue,"for",he="cb2_"+t[2]),i(ue,"class","label svelte-1v5c2i7"),i(pe,"class","svelte-1v5c2i7"),i(it,"class","svelte-1v5c2i7"),i(tt,"class","svelte-1v5c2i7"),i(Qe,"class","svelte-1v5c2i7"),i(et,"class","nested svelte-1v5c2i7"),i(M,"class","svelte-1v5c2i7"),i(st,"type","checkbox"),i(st,"id",Et="cb3_"+t[2]),i(st,"class","toggle svelte-1v5c2i7"),st.checked=!1,i(J,"class","arrow svelte-1v5c2i7"),i(Xe,"for",ce="cb3_"+t[2]),i(Xe,"class","label svelte-1v5c2i7"),i(ye,"class","svelte-1v5c2i7"),i(Ct,"class","svelte-1v5c2i7"),i(wt,"class","svelte-1v5c2i7"),i(dt,"class","svelte-1v5c2i7"),i(Lt,"class","nested svelte-1v5c2i7"),i(ve,"class","svelte-1v5c2i7"),i(mt,"type","checkbox"),i(mt,"id",Kt="cb4_"+t[2]),i(mt,"class","toggle svelte-1v5c2i7"),mt.checked=!1,i(Ft,"class","arrow svelte-1v5c2i7"),i(ct,"for",Yt="cb4_"+t[2]),i(ct,"class","label svelte-1v5c2i7"),i(_t,"class","svelte-1v5c2i7"),i(Dt,"class","nested svelte-1v5c2i7"),i(We,"class","svelte-1v5c2i7"),i(A,"class","nested svelte-1v5c2i7"),i(e,"class","svelte-1v5c2i7")},m(X,de){ae(X,e,de),a(e,l),a(e,r),a(e,n),a(n,o),a(n,c),a(n,f),a(e,g),a(e,T),a(T,N),a(T,u),a(e,b),a(e,E),a(e,k),a(e,A),a(A,C),a(C,S),a(C,B),a(C,U),a(U,R),a(U,Z),a(C,V),a(C,W),a(W,ne),a(W,se),a(W,ie),a(C,x),a(C,ge),a(ge,me),a(me,be),a(me,H),a(me,q);for(let $=0;$<Oe.length;$+=1)Oe[$]&&Oe[$].m(q,null);a(A,ee),a(A,M),a(M,I),a(M,oe),a(M,ue),a(ue,j),a(ue,z),a(M,Ne),a(M,pe),a(pe,Ce),a(pe,Ge),a(pe,Ye),a(M,Je),a(M,et),a(et,Qe),a(Qe,it),a(Qe,Mt),a(Qe,tt);for(let $=0;$<Le.length;$+=1)Le[$]&&Le[$].m(tt,null);a(A,lt),a(A,ve),a(ve,st),a(ve,Bt),a(ve,Xe),a(Xe,J),a(Xe,fe),a(ve,at),a(ve,ye),a(ye,nt),a(ye,we),a(ye,ot),a(ve,sl),a(ve,Lt),a(Lt,dt),a(dt,Ct),a(dt,al),a(dt,wt);for(let $=0;$<Se.length;$+=1)Se[$]&&Se[$].m(wt,null);a(A,nl),a(A,We),a(We,mt),a(We,ol),a(We,ct),a(ct,Ft),a(ct,rl),a(We,il),a(We,_t),a(_t,cl),a(_t,Xt),a(_t,fl),a(We,ul),a(We,Dt),a(e,dl),ml||(El=Q(E,"click",wa),ml=!0)},p(X,de){if(de&2&&s!==(s="cb_"+X[2])&&i(l,"id",s),de&2&&d!==(d=X[2]+"")&&_e(f,d),de&2&&p!==(p="cb_"+X[2])&&i(n,"for",p),de&3&&h!==(h=X[0][X[2]].partName+"")&&_e(u,h),de&3&&O!==(O=zt+"/gear/"+X[0][X[2]].partName)&&i(T,"href",O),de&2&&F!==(F="cb1_"+X[2])&&i(S,"id",F),de&2&&G!==(G="cb1_"+X[2])&&i(U,"for",G),de&3&&te!==(te=Object.keys(X[0][X[2]].mandatories).length+"")&&_e(se,te),de&3){St=Te(Object.keys(X[0][X[2]].mandatories));let $;for($=0;$<St.length;$+=1){const qe=es(X,St,$);Oe[$]?Oe[$].p(qe,de):(Oe[$]=ts(qe),Oe[$].c(),Oe[$].m(q,null))}for(;$<Oe.length;$+=1)Oe[$].d(1);Oe.length=St.length}if(de&2&&le!==(le="cb2_"+X[2])&&i(I,"id",le),de&2&&he!==(he="cb2_"+X[2])&&i(ue,"for",he),de&3&&rt!==(rt=Object.keys(X[0][X[2]].recommended).length+"")&&_e(Ge,rt),de&3){jt=Te(Object.keys(X[0][X[2]].recommended));let $;for($=0;$<jt.length;$+=1){const qe=xl(X,jt,$);Le[$]?Le[$].p(qe,de):(Le[$]=ls(qe),Le[$].c(),Le[$].m(tt,null))}for(;$<Le.length;$+=1)Le[$].d(1);Le.length=jt.length}if(de&2&&Et!==(Et="cb3_"+X[2])&&i(st,"id",Et),de&2&&ce!==(ce="cb3_"+X[2])&&i(Xe,"for",ce),de&3&&Me!==(Me=Object.keys(X[0][X[2]].restricted).length+"")&&_e(we,Me),de&3){It=Te(Object.keys(X[0][X[2]].restricted));let $;for($=0;$<It.length;$+=1){const qe=$l(X,It,$);Se[$]?Se[$].p(qe,de):(Se[$]=ss(qe),Se[$].c(),Se[$].m(wt,null))}for(;$<Se.length;$+=1)Se[$].d(1);Se.length=It.length}de&2&&Kt!==(Kt="cb4_"+X[2])&&i(mt,"id",Kt),de&2&&Yt!==(Yt="cb4_"+X[2])&&i(ct,"for",Yt),de&3&&Rt!==(Rt=Object.keys(X[0][X[2]].restricted).length+"")&&_e(Xt,Rt)},d(X){X&&v(e),Ze(Oe,X),Ze(Le,X),Ze(Se,X),ml=!1,El()}}}function Ca(t){let e,l,s,r,n,o=t[1].length+"",c,d,f,p,g=Te(t[1]),T=[];for(let N=0;N<g.length;N+=1)T[N]=as(Ql(t,g,N));return{c(){e=m("section"),l=m("h2"),s=K(`Sub-design
		`),r=m("span"),n=K("(Number of sub-instances: "),c=K(o),d=K(")"),f=D(),p=m("ol");for(let N=0;N<T.length;N+=1)T[N].c();this.h()},l(N){e=_(N,"SECTION",{class:!0});var h=w(e);l=_(h,"H2",{class:!0});var u=w(l);s=Y(u,`Sub-design
		`),r=_(u,"SPAN",{class:!0});var O=w(r);n=Y(O,"(Number of sub-instances: "),c=Y(O,o),d=Y(O,")"),O.forEach(v),u.forEach(v),f=y(h),p=_(h,"OL",{class:!0});var b=w(p);for(let E=0;E<T.length;E+=1)T[E].l(b);b.forEach(v),h.forEach(v),this.h()},h(){i(r,"class","svelte-1v5c2i7"),i(l,"class","svelte-1v5c2i7"),i(p,"class","svelte-1v5c2i7"),i(e,"class","svelte-1v5c2i7")},m(N,h){ae(N,e,h),a(e,l),a(l,s),a(l,r),a(r,n),a(r,c),a(r,d),a(e,f),a(e,p);for(let u=0;u<T.length;u+=1)T[u]&&T[u].m(p,null)},p(N,[h]){if(h&2&&o!==(o=N[1].length+"")&&_e(c,o),h&3){g=Te(N[1]);let u;for(u=0;u<g.length;u+=1){const O=Ql(N,g,u);T[u]?T[u].p(O,h):(T[u]=as(O),T[u].c(),T[u].m(p,null))}for(;u<T.length;u+=1)T[u].d(1);T.length=g.length}},i:Ve,o:Ve,d(N){N&&v(e),Ze(T,N)}}}function wa(){console.log("dbg330: downloadConstraints")}function Da(t,e,l){let{subD:s={}}=e,r=[];return t.$$set=n=>{"subD"in n&&l(0,s=n.subD)},t.$$.update=()=>{t.$$.dirty&1&&l(1,r=Object.keys(s))},[s,r]}class ya extends He{constructor(e){super(),Ke(this,e,Da,Ca,ze,{subD:0})}}function ns(t,e,l){const s=t.slice();return s[17]=e[l],s}function os(t,e,l){const s=t.slice();return s[17]=e[l],s}function rs(t){let e,l,s=t[17]+"",r,n,o;return{c(){e=m("option"),l=K("face "),r=K(s),n=K(" as svg"),this.h()},l(c){e=_(c,"OPTION",{});var d=w(e);l=Y(d,"face "),r=Y(d,s),n=Y(d," as svg"),d.forEach(v),this.h()},h(){e.__value=o="svg_"+t[17],ke(e,e.__value)},m(c,d){ae(c,e,d),a(e,l),a(e,r),a(e,n)},p(c,d){d&4&&s!==(s=c[17]+"")&&_e(r,s),d&4&&o!==(o="svg_"+c[17])&&(e.__value=o,ke(e,e.__value))},d(c){c&&v(e)}}}function is(t){let e,l,s=t[17]+"",r,n,o;return{c(){e=m("option"),l=K("face "),r=K(s),n=K(" as dxf"),this.h()},l(c){e=_(c,"OPTION",{});var d=w(e);l=Y(d,"face "),r=Y(d,s),n=Y(d," as dxf"),d.forEach(v),this.h()},h(){e.__value=o="dxf_"+t[17],ke(e,e.__value)},m(c,d){ae(c,e,d),a(e,l),a(e,r),a(e,n)},p(c,d){d&4&&s!==(s=c[17]+"")&&_e(r,s),d&4&&o!==(o="dxf_"+c[17])&&(e.__value=o,ke(e,e.__value))},d(c){c&&v(e)}}}function Oa(t){let e,l,s,r,n="Log",o,c,d,f,p,g,T,N,h,u="Export",O,b,E,L="all faces merged as svg",k,A="all faces merged as dxf",C,S="all faces as pax.json",F,B="all faces as openscad.scad",U,R="all faces as OpenJScad.js",Z,G="all faces and more as zip",V,W,ne="Save to File",te,se,ie,x,ge;e=new fa({props:{pDef:t[0],geom:t[1],face:t[3],simTime:t[4]}}),e.$on("paramChg",t[10]);function me(I){t[12](I)}function be(I){t[13](I)}let P={pDef:t[0],geom:t[1],optFaces:t[2]};t[3]!==void 0&&(P.face=t[3]),t[4]!==void 0&&(P.simTime=t[4]),f=new Ea({props:P}),Ae.push(()=>Fe(f,"face",me)),Ae.push(()=>Fe(f,"simTime",be));let H=Te(t[2]),q=[];for(let I=0;I<H.length;I+=1)q[I]=rs(os(t,H,I));let ee=Te(t[2]),M=[];for(let I=0;I<ee.length;I+=1)M[I]=is(ns(t,ee,I));return se=new ya({props:{subD:t[8]}}),{c(){je(e.$$.fragment),l=D(),s=m("section"),r=m("h2"),r.textContent=n,o=D(),c=m("textarea"),d=D(),je(f.$$.fragment),T=D(),N=m("section"),h=m("h2"),h.textContent=u,O=D(),b=m("select");for(let I=0;I<q.length;I+=1)q[I].c();E=m("option"),E.textContent=L;for(let I=0;I<M.length;I+=1)M[I].c();k=m("option"),k.textContent=A,C=m("option"),C.textContent=S,F=m("option"),F.textContent=B,U=m("option"),U.textContent=R,Z=m("option"),Z.textContent=G,V=D(),W=m("button"),W.textContent=ne,te=D(),je(se.$$.fragment),this.h()},l(I){Ie(e.$$.fragment,I),l=y(I),s=_(I,"SECTION",{class:!0});var le=w(s);r=_(le,"H2",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-4ty0ys"&&(r.textContent=n),o=y(le),c=_(le,"TEXTAREA",{rows:!0,cols:!0,wrap:!0,class:!0}),w(c).forEach(v),le.forEach(v),d=y(I),Ie(f.$$.fragment,I),T=y(I),N=_(I,"SECTION",{class:!0});var oe=w(N);h=_(oe,"H2",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-1kkpb88"&&(h.textContent=u),O=y(oe),b=_(oe,"SELECT",{class:!0});var ue=w(b);for(let j=0;j<q.length;j+=1)q[j].l(ue);E=_(ue,"OPTION",{"data-svelte-h":!0}),re(E)!=="svelte-22of2y"&&(E.textContent=L);for(let j=0;j<M.length;j+=1)M[j].l(ue);k=_(ue,"OPTION",{"data-svelte-h":!0}),re(k)!=="svelte-1utjrni"&&(k.textContent=A),C=_(ue,"OPTION",{"data-svelte-h":!0}),re(C)!=="svelte-3g91m5"&&(C.textContent=S),F=_(ue,"OPTION",{"data-svelte-h":!0}),re(F)!=="svelte-1tpsyal"&&(F.textContent=B),U=_(ue,"OPTION",{"data-svelte-h":!0}),re(U)!=="svelte-1n2n9j5"&&(U.textContent=R),Z=_(ue,"OPTION",{"data-svelte-h":!0}),re(Z)!=="svelte-168w9vd"&&(Z.textContent=G),ue.forEach(v),V=y(oe),W=_(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),re(W)!=="svelte-154bn2a"&&(W.textContent=ne),te=y(oe),Ie(se.$$.fragment,oe),oe.forEach(v),this.h()},h(){i(r,"class","svelte-19nn0vk"),i(c,"rows","5"),i(c,"cols","94"),c.readOnly=!0,i(c,"wrap","off"),c.value=t[5],i(c,"class","svelte-19nn0vk"),el(c,"colorErr",t[6]),el(c,"colorWarn",t[7]),i(s,"class","svelte-19nn0vk"),i(h,"class","svelte-19nn0vk"),E.__value="allsvg",ke(E,E.__value),k.__value="alldxf",ke(k,k.__value),C.__value="pax",ke(C,C.__value),F.__value="oscad",ke(F,F.__value),U.__value="ojscad",ke(U,U.__value),Z.__value="zip",ke(Z,Z.__value),i(b,"class","svelte-19nn0vk"),t[9]===void 0&&Ht(()=>t[14].call(b)),i(W,"class","svelte-19nn0vk"),i(N,"class","svelte-19nn0vk")},m(I,le){Pe(e,I,le),ae(I,l,le),ae(I,s,le),a(s,r),a(s,o),a(s,c),ae(I,d,le),Pe(f,I,le),ae(I,T,le),ae(I,N,le),a(N,h),a(N,O),a(N,b);for(let oe=0;oe<q.length;oe+=1)q[oe]&&q[oe].m(b,null);a(b,E);for(let oe=0;oe<M.length;oe+=1)M[oe]&&M[oe].m(b,null);a(b,k),a(b,C),a(b,F),a(b,U),a(b,Z),Nt(b,t[9],!0),a(N,V),a(N,W),a(N,te),Pe(se,N,null),ie=!0,x||(ge=[Q(b,"change",t[14]),Q(W,"click",t[11])],x=!0)},p(I,[le]){const oe={};le&1&&(oe.pDef=I[0]),le&2&&(oe.geom=I[1]),le&8&&(oe.face=I[3]),le&16&&(oe.simTime=I[4]),e.$set(oe),(!ie||le&32)&&(c.value=I[5]),(!ie||le&64)&&el(c,"colorErr",I[6]),(!ie||le&128)&&el(c,"colorWarn",I[7]);const ue={};if(le&1&&(ue.pDef=I[0]),le&2&&(ue.geom=I[1]),le&4&&(ue.optFaces=I[2]),!p&&le&8&&(p=!0,ue.face=I[3],Be(()=>p=!1)),!g&&le&16&&(g=!0,ue.simTime=I[4],Be(()=>g=!1)),f.$set(ue),le&4){H=Te(I[2]);let z;for(z=0;z<H.length;z+=1){const he=os(I,H,z);q[z]?q[z].p(he,le):(q[z]=rs(he),q[z].c(),q[z].m(b,E))}for(;z<q.length;z+=1)q[z].d(1);q.length=H.length}if(le&4){ee=Te(I[2]);let z;for(z=0;z<ee.length;z+=1){const he=ns(I,ee,z);M[z]?M[z].p(he,le):(M[z]=is(he),M[z].c(),M[z].m(b,k))}for(;z<M.length;z+=1)M[z].d(1);M.length=ee.length}le&516&&Nt(b,I[9]);const j={};le&256&&(j.subD=I[8]),se.$set(j)},i(I){ie||(Ee(e.$$.fragment,I),Ee(f.$$.fragment,I),Ee(se.$$.fragment,I),ie=!0)},o(I){De(e.$$.fragment,I),De(f.$$.fragment,I),De(se.$$.fragment,I),ie=!1},d(I){I&&(v(l),v(s),v(d),v(T),v(N)),Ue(e,I),Ue(f,I),Ze(q,I),Ze(M,I),Ue(se),x=!1,xe(ge)}}}function La(t){let e=!0;const l=/warn/i;return t.search(l)<0&&(e=!1),e}function Sa(t,e){const l=document.createElement("a"),s=URL.createObjectURL(e);l.setAttribute("href",s),l.setAttribute("download",t),l.click(),l.remove(),URL.revokeObjectURL(s)}function ja(t,e,l){const s=document.createElement("a"),r="data:"+l+";utf-8,"+encodeURIComponent(e);s.setAttribute("href",r),s.setAttribute("download",t),s.click(),s.remove()}function Ia(){const t=/[-:]/g,e=/\..*$/;return new Date().toISOString().replace(t,"").replace(e,"").replace("T","_")}function Pa(t,e,l){let s;Tt(t,ut,k=>l(15,s=k));let{pDef:r}=e,{geom:n}=e,o=[],c,d=0,f=`Dummy initial
Will be replaced during onMount
`,p=!1,g=!1,T={};function N(k){l(5,f=`Geometry ${k} computed at ${new Date().toLocaleTimeString()}
`);const C=n(d,s[r.partName]);l(5,f+=C.logstr),l(6,p=C.calcErr),l(7,g=La(C.logstr)),l(2,o=Object.keys(C.fig)),l(8,T=C.sub)}function h(){N(r.partName)}let u;async function O(){const k=/^svg_/,A=/^dxf_/;let C=ft.eSVG,S="",F="all";u.match(k)?(C=ft.eSVG,S=u.replace(k,""),F=S):u.match(A)?(C=ft.eDXF,S=u.replace(A,""),F=S):u==="allsvg"?(C=ft.eSVG,S=kt):u==="alldxf"?(C=ft.eDXF,S=kt):u==="pax"?(C=ft.ePAX,S=kt):u==="oscad"?(C=ft.eOPENSCAD,S=kt):u==="ojscad"?(C=ft.eJSCAD,S=kt):u==="zip"?(C=ft.eZIP,S=kt):console.log(`err883: downloadExport exportFace ${u} invalid`);const B=bs(C),U=Ts(C),R=ks(C),Z=r.partName+"_"+F+"_"+Ia()+B;if(R){const G=await ps(n,d,s[r.partName],r.partName,C);Sa(Z,G)}else{const G=gs(n,s[r.partName],r.partName,S,C);ja(Z,G,U)}}function b(k){c=k,l(3,c)}function E(k){d=k,l(4,d)}function L(){u=ll(this),l(9,u),l(2,o)}return t.$$set=k=>{"pDef"in k&&l(0,r=k.pDef),"geom"in k&&l(1,n=k.geom)},t.$$.update=()=>{t.$$.dirty&1&&N(r.partName)},[r,n,o,c,d,f,p,g,T,u,h,O,b,E,L]}class Ua extends He{constructor(e){super(),Ke(this,e,Pa,Oa,ze,{pDef:0,geom:1})}}function Aa(t){let e,l=t[0].pageDef.pTitle+"",s,r,n,o=t[0].pageDef.pDescription+"",c,d,f,p;return f=new Ua({props:{pDef:t[0].pageDef.pDef,geom:t[0].pageDef.pGeom}}),{c(){e=m("h1"),s=K(l),r=D(),n=m("article"),c=K(o),d=D(),je(f.$$.fragment),this.h()},l(g){e=_(g,"H1",{class:!0});var T=w(e);s=Y(T,l),T.forEach(v),r=y(g),n=_(g,"ARTICLE",{class:!0});var N=w(n);c=Y(N,o),N.forEach(v),d=y(g),Ie(f.$$.fragment,g),this.h()},h(){i(e,"class","svelte-1aya6oa"),i(n,"class","svelte-1aya6oa")},m(g,T){ae(g,e,T),a(e,s),ae(g,r,T),ae(g,n,T),a(n,c),ae(g,d,T),Pe(f,g,T),p=!0},p(g,[T]){(!p||T&1)&&l!==(l=g[0].pageDef.pTitle+"")&&_e(s,l),(!p||T&1)&&o!==(o=g[0].pageDef.pDescription+"")&&_e(c,o);const N={};T&1&&(N.pDef=g[0].pageDef.pDef),T&1&&(N.geom=g[0].pageDef.pGeom),f.$set(N)},i(g){p||(Ee(f.$$.fragment,g),p=!0)},o(g){De(f.$$.fragment,g),p=!1},d(g){g&&(v(e),v(r),v(n),v(d)),Ue(f,g)}}}function Ma(t,e,l){let{data:s}=e;return t.$$set=r=>{"data"in r&&l(0,s=r.data)},[s]}class Xa extends He{constructor(e){super(),Ke(this,e,Ma,Aa,ze,{data:0})}}export{Xa as component,Ya as universal};
